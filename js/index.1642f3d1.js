(function(t){function e(e){for(var o,n,s=e[0],c=e[1],u=e[2],l=0,m=[];l<s.length;l++)n=s[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(m.length)m.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,n=1;n<a.length;n++){var s=a[n];0!==r[s]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var o={},n={index:0},r={index:0},i=[];function s(t){return c.p+"js/"+({404:"404","about~actions~catalog~home~payment~rating":"about~actions~catalog~home~payment~rating","about~actions~moderator-partner~payment":"about~actions~moderator-partner~payment","catalog~home~payment":"catalog~home~payment",payment:"payment","about~catalog~home~moderator-statistic":"about~catalog~home~moderator-statistic",catalog:"catalog",home:"home",rating:"rating",cooperation:"cooperation","personal~repayment~statistic":"personal~repayment~statistic",personal:"personal",deposit:"deposit",faq:"faq"}[t]||t)+"."+{404:"fbb22a08","chunk-2d0c9224":"ca874463","about~actions~catalog~home~payment~rating":"1438e67e","about~actions~moderator-partner~payment":"f719693e","catalog~home~payment":"8fb04980",payment:"fe9a48b9","about~catalog~home~moderator-statistic":"fd1a8eeb",catalog:"19cd12b6",home:"e5785a01",rating:"abfa1699","chunk-075481b7":"ca16a661","chunk-5ebe8f00":"7a3c314f",cooperation:"5d466a05","personal~repayment~statistic":"1369f50b",personal:"a24c5a2b",deposit:"e702bb51",faq:"8cf7b026"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"about~actions~moderator-partner~payment":1,payment:1,"about~catalog~home~moderator-statistic":1,catalog:1,home:1,rating:1,cooperation:1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var o="css/"+({404:"404","about~actions~catalog~home~payment~rating":"about~actions~catalog~home~payment~rating","about~actions~moderator-partner~payment":"about~actions~moderator-partner~payment","catalog~home~payment":"catalog~home~payment",payment:"payment","about~catalog~home~moderator-statistic":"about~catalog~home~moderator-statistic",catalog:"catalog",home:"home",rating:"rating",cooperation:"cooperation","personal~repayment~statistic":"personal~repayment~statistic",personal:"personal",deposit:"deposit",faq:"faq"}[t]||t)+"."+{404:"31d6cfe0","chunk-2d0c9224":"31d6cfe0","about~actions~catalog~home~payment~rating":"31d6cfe0","about~actions~moderator-partner~payment":"2a17a408","catalog~home~payment":"31d6cfe0",payment:"9e86ee4e","about~catalog~home~moderator-statistic":"020d8e09",catalog:"aa269221",home:"4faa127c",rating:"05b1a72c","chunk-075481b7":"31d6cfe0","chunk-5ebe8f00":"31d6cfe0",cooperation:"0f05707e","personal~repayment~statistic":"31d6cfe0",personal:"31d6cfe0",deposit:"31d6cfe0",faq:"31d6cfe0"}[t]+".css",r=c.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===r))return e()}var m=document.getElementsByTagName("style");for(s=0;s<m.length;s++){u=m[s],l=u.getAttribute("data-href");if(l===o||l===r)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var o=e&&e.target&&e.target.src||r,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete n[t],p.parentNode.removeChild(p),a(i)},p.href=r;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){n[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var i=new Promise((function(e,a){o=r[t]=[e,a]}));e.push(o[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var m=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(p);var a=r[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;m.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",m.name="ChunkLoadError",m.type=o,m.request=n,a[1](m)}r[t]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(a,o,function(e){return t[e]}.bind(null,o));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var m=0;m<u.length;m++)e(u[m]);var p=l;i.push([0,"chunk-vendors","chunk-common"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("28a5"),a("7f7f"),a("386d"),a("cadf"),a("551c"),a("f751"),a("097d");var o,n=a("2b0e"),r=a("bc3a"),i=a.n(r),s=a("3dfd"),c=a("bd86"),u=a("8c4f");ym(39511350,"init",{defer:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0}),n["a"].use(u["a"]);var l=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("home")]).then(a.bind(null,"bb51"))}},{path:"/about",name:"about",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("chunk-075481b7")]).then(a.bind(null,"f820"))}},{path:"/contacts",name:"contacts",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("chunk-5ebe8f00")]).then(a.bind(null,"c93c"))}},{path:"/id:id",name:"catalogDetail",props:!0,component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("catalog")]).then(a.bind(null,"f329"))}},{path:"/img:id",name:"catalogDetailImg",props:!0,component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("catalog")]).then(a.bind(null,"44db"))}},{path:"/sid:sid",name:"catalogList",props:!0,component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("catalog")]).then(a.bind(null,"f329"))}},{path:"/catalog",name:"catalog",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("catalog")]).then(a.bind(null,"f329"))}},{path:"/search",name:"search",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("catalog")]).then(a.bind(null,"2d3b"))}},{path:"/favorites",name:"favorites",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("catalog")]).then(a.bind(null,"48d5"))}},{path:"/faq",name:"faq",component:function(){return a.e("faq").then(a.bind(null,"10c2"))}},{path:"/cooperation",name:"cooperation",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("cooperation")]).then(a.bind(null,"4dfe"))}},{path:"/rating",name:"rating",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("rating")]).then(a.bind(null,"f829"))}},{path:"/suppliers-rating",name:"suppliers-rating",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("rating")]).then(a.bind(null,"03ab"))}},{path:"/personal",name:"personal",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("personal~repayment~statistic"),a.e("personal")]).then(a.bind(null,"90ab"))}},{path:"/personal/profile",name:"profile",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("personal~repayment~statistic"),a.e("personal")]).then(a.bind(null,"adf6"))}},{path:"/offer",name:"offer",component:function(){return Promise.resolve().then(a.bind(null,"b793"))}},{path:"/deposit",name:"deposit",component:function(){return a.e("deposit").then(a.bind(null,"60ac"))}},{path:"/statistic",name:"statistic",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("rating")]).then(a.bind(null,"70f6"))}},{path:"/payment",name:"payment",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"7a1c"))}},{path:"/html-partner/coupons",name:"partnerCoupons",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"720f"))}},{path:"/html-moderator/claims",name:"moderatorClaimsPartnership",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"db1e"))}},{path:"/cost",name:"cost",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"accd"))}},(o={path:"/push",name:"push",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~catalog~home~moderator-statistic"),a.e("catalog~home~payment"),a.e("home")]).then(a.bind(null,"bb51"))}},Object(c["a"])(o,"path","/supplier"),Object(c["a"])(o,"name","supplier"),Object(c["a"])(o,"component",(function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"b680"))})),o),{path:"/new-cooperation",name:"newCooperation",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"11f7"))}},{path:"/new-supplier",name:"newSupplier",component:function(){return Promise.all([a.e("chunk-2d0c9224"),a.e("about~actions~catalog~home~payment~rating"),a.e("about~actions~moderator-partner~payment"),a.e("catalog~home~payment"),a.e("payment")]).then(a.bind(null,"5c79"))}},{path:"*",component:function(){return a.e("404").then(a.bind(null,"6d64"))}}],scrollBehavior:function(t,e,a){return a||{x:0,y:0}}}),m=a("2f62"),p=a("8fc1"),d=a("21aa"),f=a("2988"),h=a("7618"),g=a("4328"),b=a.n(g),y=a("b643"),v=a("2b27"),k=a.n(v),w={data:{},status:!1},O={getList:function(t){return function(e){return t.data}}},S={getList:function(t,e){var a={};i.a.get("https://api.zemskidki.ru/public/v1/public/faq/",{headers:y["a"],params:a}).then((function(e){"object"===Object(h["a"])(e.data)&&0===+e.data.error&&t.commit("setData",e.data.result)})).catch((function(t){}))},sendQuest:function(t,e){return new Promise((function(a,o){var n={quest:e.quest};i.a.get("https://api.zemskidki.ru/public/v1/public/faq/",{headers:y["a"],params:n}).then((function(e){a(),"object"===Object(h["a"])(e.data)&&0===+e.data.error&&t.commit("setStatus",e.data.error)})).catch((function(t){o()}))}))}},P={setData:function(t,e){n["a"].set(t,"data",e.items)},setStatus:function(t,e){n["a"].set(t,"status",!e.error)}},C={namespaced:!0,state:w,getters:O,actions:S,mutations:P},j=a("ed85"),L=a("939d"),T={query:"",urlPrevious:"",showSearchTop:!1},I={},M={},z={toggleSearchTop:function(t){t.showSearchTop=!t.showSearchTop},hideSearchTop:function(t){t.showSearchTop=!1},updateQuery:function(t,e){t.query=e},updateQueryUrlPrevious:function(t,e){t.urlPrevious=e.url}},N={namespaced:!0,state:T,getters:I,actions:M,mutations:z},E=a("d5fd"),B=a("1a7e"),A=(a("55dd"),{isLoadedProcess:!0,isLastPage:!1,statistic:{},coupons:[],providers:[],actions:[],currentProvider:{},sort:{current:{order:"sum",by:"desc"},order:{name:{code:"name"},count:{code:"count"},sum:{code:"sum"},average:{code:"average"}},by:{asc:"asc",desc:"desc"}},page:1,status:!1}),F={getData:function(t){return function(e){return t.data}},getCoupons:function(t){return function(e){return t.coupons}},getSort:function(t,e){return A.sort.current}},x={getStatistic:function(t,e){i.a.get("https://api.zemskidki.ru/public/v1/public/statistic/"+t.rootState.cities.current.id,{headers:y["a"],withCredentials:!0}).then((function(e){t.commit("setStatistic",e.data.result.statistic)})).catch((function(t){}))},getCurrentProvider:function(t,e){t.commit("setCurrentProvider",{}),i.a.get("https://api.zemskidki.ru/public/v1/public/rating_providers/"+e.id,{headers:y["a"],withCredentials:!0}).then((function(e){t.commit("setCurrentProvider",e.data.result.provider)})).catch((function(t){}))},getAllStatistic:function(t,e){i.a.get("https://api.zemskidki.ru/public/v1/public/statistic/",{headers:y["a"],withCredentials:!0}).then((function(e){t.commit("setStatistic",e.data.result.statistic)})).catch((function(t){}))},getData:function(t,e){if(A.isLoadedProcess&&("sort"===e.action&&(t.commit("resetPage"),t.commit("setLastPage",!1)),!A.isLastPage)){var a={sort:A.sort.current,page:A.page,city:t.rootState.cities.current.xmlId};t.commit("setLoadedProcess",!1),i.a.get("https://api.zemskidki.ru/public/v1/public/rating/",{headers:y["a"],params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},withCredentials:!0}).then((function(e){"object"===Object(h["a"])(e.data)&&0===+e.data.error&&(t.commit("incrementPage"),t.commit("setData",e.data.result),e.data.result.rating.isLastPage&&t.commit("setLastPage",!0)),t.commit("setLoadedProcess",!0)})).catch((function(e){t.commit("setLoadedProcess",!0)}))}},getProviders:function(t,e){if(A.isLoadedProcess&&("sort"===e.action&&(t.commit("resetPageRating"),t.commit("setLastPage",!1)),!A.isLastPage)){var a={sort:A.sort.current,page:A.page,city:t.rootState.cities.current.xmlId};t.commit("setLoadedProcess",!1),i.a.get("https://api.zemskidki.ru/public/v1/public/rating/",{headers:y["a"],params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},withCredentials:!0}).then((function(e){"object"===Object(h["a"])(e.data)&&0===+e.data.error&&(t.commit("setProviders",e.data.result),e.data.result.rating.isLastPage&&t.commit("setLastPage",!0)),t.commit("setLoadedProcess",!0)})).catch((function(e){t.commit("setLoadedProcess",!0)}))}},getActions:function(t,e){if(A.isLoadedProcess&&("sort"===e.action&&(t.commit("resetPageRating"),t.commit("setLastPage",!1)),!A.isLastPage)){var a={sort:A.sort.current,page:A.page,pageSize:20,city:t.rootState.cities.current.xmlId};t.commit("setLoadedProcess",!1),i.a.get("https://api.zemskidki.ru/public/v1/public/rating/",{headers:y["a"],params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},withCredentials:!0}).then((function(e){"object"===Object(h["a"])(e.data)&&0===+e.data.error&&(t.commit("setActions",e.data.result),t.commit("incrementPage"),e.data.result.rating.isLastPage&&t.commit("setLastPage",!0)),t.commit("setLoadedProcess",!0)})).catch((function(e){t.commit("setLoadedProcess",!0)}))}},setSort:function(t,e){var a="desc";A.sort.current.order===e.order&&(a="asc"===A.sort.current.by?"desc":"asc"),t.commit("setSort",{order:A.sort.order[e.order].code,by:a})}},D={setProviders:function(t,e){for(var a in e.rating.providers)e.rating.providers.hasOwnProperty(a)&&t.providers.push(e.rating.providers[a])},clearProviders:function(t,e){t.providers=[]},setActions:function(t,e){for(var a in e.rating.items)e.rating.items.hasOwnProperty(a)&&t.actions.push(e.rating.items[a])},clearActions:function(t,e){t.actions=[]},setCurrentProvider:function(t,e){n["a"].set(t,"currentProvider",e)},setStatistic:function(t,e){for(var o in e.coordinates_map=[],e.coordinates){var r=e.coordinates[o],i=[30,30];r.count>9&&(i=[41,41]);var s=[0,5];r.count>9&&(s=[5,9]),e.coordinates_map.push({id:o,type:"placemark",coords:[r.coord.split(",")[1],r.coord.split(",")[0]],hint:"",balloon:{header:"",body:"",footer:""},cluster:!1,count:r.count,icon:{layout:"default#imageWithContent",imageHref:a("1b20"),imageSize:i,imageOffset:[-15,-18],content:r.count,contentOffset:s,contentTemplate:'<div style="width: 30px;height: 12px;text-align: center;color: #FFFFFF; font-size: 12px;font-weight: bold;font-family: prox, sans-serif, Arial;">$[properties.iconContent]</div>'}})}n["a"].set(t,"statistic",e)},setSort:function(t,e){"name"===e.order&&"name"!==t.sort.current.order?(n["a"].set(t.sort,"current",e),n["a"].set(t.sort.current,"by","asc")):n["a"].set(t.sort,"current",e)},incrementPage:function(t){n["a"].set(t,"page",t.page+1)},resetPage:function(t){n["a"].set(t,"page",1),n["a"].set(t,"coupons",[])},resetPageRating:function(t){n["a"].set(t,"page",1),n["a"].set(t,"providers",[]),n["a"].set(t,"actions",[]),n["a"].set(t,"isLastPage",!1)},setLoadedProcess:function(t,e){n["a"].set(t,"isLoadedProcess",e)},setLastPage:function(t,e){n["a"].set(t,"isLastPage",e)}},q={namespaced:!0,state:A,getters:F,actions:x,mutations:D};a("8e6e"),a("456d"),a("ac4d"),a("8a81"),a("ac6a"),a("5df3"),a("4f7f");function $(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?$(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var R={categories:new Set,coupons:[],isLoadNextPage:!0,isLoad:!1,page:1,favorites:{items:[]}},H={},V={resendCoupon:function(t,e){if(!R.isLoad){t.commit("setLoad",!0);var a={resend:!0};i.a.put("https://api.zemskidki.ru/public/v1/user/coupons/"+e.id,{},{withCredentials:!0,params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(e){t.commit("setLoad",!1),"object"===Object(h["a"])(e.data)&&0===+e.data.error||401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(e){t.commit("setLoad",!1)}))}},getCouponList:function(t,e){if("false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")){if(!R.isLoad&&R.isLoadNextPage||e.reload){t.commit("setLoad",!0);var a={page:R.page};i.a.get("https://api.zemskidki.ru/public/v1/user/coupons/",{withCredentials:!0,params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(a){t.commit("setLoad",!1),"object"===Object(h["a"])(a.data)&&0===+a.data.error?(void 0!==e&&e.currentSection&&(a.data.result.currentSection=e.currentSection),t.commit("setCouponList",{items:a.data.result.items,favorites:t.rootState.actions.favorites.items}),R.favorites.items.length<10?t.commit("isLoadNextPage",!1):t.commit("isLoadNextPage",a.data.result.isLoadNextPage),t.commit("incrementPage")):401===+a.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(e){t.commit("setLoad",!1)}))}}else t.dispatch("auth/logout",{},{root:!0})},initialCouponState:function(t){t.commit("isLoadNextPage",!0),t.commit("setPage",1),t.commit("setCouponList",{items:[]})},refuseCoupon:function(t,e){if(!R.isSend){t.commit("setLoad",!0);var a=_({},e.params);i.a.put("https://api.zemskidki.ru/public/v1/user/coupons/"+e.couponId,{},{withCredentials:!0,params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(a){t.commit("setLoad",!1),"object"===Object(h["a"])(a.data)&&0===+a.data.error?a.data.result.status&&t.commit("updateCoupon",{id:e.couponId,status:a.data.result.status}):401===+a.data.error&&t.dispatch("auth/logout",{},{root:!0}),e.popup&&t.commit("popups/close",{name:e.popup},{root:!0})})).catch((function(e){t.commit("setLoad",!1)}))}},buy:function(t,e){return new Promise((function(a,o){if(!R.isLoad){t.commit("setLoad",!0);var n={action:e.id,city:t.rootState.cities.current.xmlId,pay_select:e.card};for(var r in t.rootState.auth.forms.registration.fields){var s=t.rootState.auth.forms.registration.fields[r];n[s.name]=s.value}i.a.post("https://api.zemskidki.ru/public/v1/user/coupons/",{},{withCredentials:!0,params:n,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(e){t.commit("setLoad",!1),t.commit("popups/close",{name:t.rootState.popups.items.couponBuy.name},{root:!0}),"object"===Object(h["a"])(e.data)&&0===+e.data.error?(e.data.result.user&&t.commit("users/setUser",{user:e.data.result.user},{root:!0}),e.data.result.redirect?window.location.href=e.data.result.redirect:"ok"==e.data.result.status?t.dispatch("popups/open",{name:t.rootState.popups.items.couponBuyOk.name},{root:!0}):t.dispatch("popups/open",{name:t.rootState.popups.items.couponBuyError.name},{root:!0})):401===+e.data.error?(t.dispatch("auth/logout",{},{root:!0}),t.dispatch("popups/open",{name:t.rootState.popups.items.couponBuyErrorAuth.name},{root:!0})):t.dispatch("popups/open",{name:t.rootState.popups.items.couponBuyError.name},{root:!0}),a()})).catch((function(e){a(),t.commit("setLoad",!1)}))}}))},checkPayment:function(t,e){if(!R.isSend){t.commit("setLoad",!0);var a={action:e.id,pay_select:e.pay_select};i.a.post("https://api.zemskidki.ru/public/v1/user/coupons/",{},{withCredentials:!0,params:a,paramsSerializer:function(t){return b.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(e){t.commit("setLoad",!1),"object"===Object(h["a"])(e.data)&&0===+e.data.error||401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(e){t.commit("setLoad",!1)}))}}},U={setCouponList:function(t,e){if(null!==e&&null!==e.items)for(var a in t.page<2&&(t.coupons=[]),e.items)if(e.items.hasOwnProperty(a)){var o=e.items[a];-1!==e.favorites.indexOf(o.action.id)&&(o.action.favorite=!0),t.coupons.push(o)}},updateCoupon:function(t,e){if(e.id)for(var a in t.coupons)t.coupons[a].id===e.id&&e.status&&n["a"].set(t.coupons[a],"status",e.status)},addFavorite:function(t,e){for(var a in t.coupons)e.id===t.coupons[a].id&&(e.action.favorite=!0,n["a"].set(t.coupons,a,e))},removeFavorite:function(t,e){for(var a in t.coupons)e.id===t.coupons[a].id&&(e.action.favorite=!1,n["a"].set(t.coupons,a,e))},isLoadNextPage:function(t,e){t.isLoadNextPage=e},setLoad:function(t,e){t.isLoad=e},setPage:function(t,e){t.page=e},incrementPage:function(t){t.page++},setCancelToken:function(t,e){t.cancelToken=e}},W={namespaced:!0,state:R,getters:H,actions:V,mutations:U},Z=a("49e7"),K=a("8bc5"),Q=a("e8cf"),G=a("6274"),J=a("9668");n["a"].use(m["a"]);var X=new m["a"].Store({strict:!1,modules:{menus:p["a"],actions:d["a"],content:f["a"],faq:C,cities:j["a"],popups:L["a"],search:N,auth:E["a"],users:B["a"],rating:q,userCoupons:W,mail:Z["a"],forms:K["a"],opinions:Q["a"],masks:G["a"],options:J["a"]},state:{onTabClick:!1,notifyPageVersion:""},mutations:{setTabClick:function(t,e){t.setTabClick=!0},setNotifyPageVersion:function(t,e){t.notifyPageVersion=e}},actions:{}}),Y=(a("6762"),a("2fdb"),a("d225")),tt=a("b0b4"),et=a("75fc");function at(t,e){if(t&&"object"===Object(h["a"])(t))for(var a in t)e.events.add(a,t[a])}function ot(t,e){var a=e.options,o=e.callbacks,n=e.map,r=e.useObjectManager,i=e.objectManagerClusterize,s="\n      <div>{{ properties.balloonContentHeader }}</div>\n      <div>{{ properties.balloonContentBody }}</div>\n      <div>{{ properties.balloonContentFooter }}</div>\n    ",c={},u=[],l=!0,m=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;h.clusterName?c[h.clusterName]=c[h.clusterName]?[].concat(Object(et["a"])(c[h.clusterName]),[h]):[h]:u.push(h)}}catch(C){m=!0,p=C}finally{try{l||null==f.return||f.return()}finally{if(m)throw p}}for(var g in c){var b=a[g]||{},y=o[g]||{},v=b.layout||s;if(b.clusterBalloonItemContentLayout=ymaps.templateLayoutFactory.createClass(v),r){var k=new ymaps.ObjectManager(Object.assign({clusterize:i},b));for(var w in y)k.clusters.events.add(w,y[w]);k.add(c[g]),n.geoObjects.add(k)}else{var O=new ymaps.Clusterer(b);for(var S in y)O.events.add(S,y[S]);O.add(c[g]),n.geoObjects.add(O)}}if(u.length){var P=r?new ymaps.ObjectManager({clusterize:!1}):new ymaps.GeoObjectCollection;u.forEach((function(t){return P.add(t)})),n.geoObjects.add(P)}}function nt(t){var e,a=t.icon.color||"blue";return e=t.icon.glyph?rt(t.icon.glyph):t.icon.content?"Stretchy":"",a+e}function rt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function it(t){return t.map((function(t){return Array.isArray(t)?it(t):+t}))}function st(t,e){var a=[];function o(t,e){var o=a.length;while(o--)if((a[o][0]===t||a[o][0]===e)&&(a[o][1]===e||a[o][1]===t))return!0;return!1}return function t(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date)return+e===+n;if("object"!==Object(h["a"])(e)||"object"!==Object(h["a"])(n))return!1;if(o(e,n))return!0;a.push([e,n]);var r=Object.keys(e),i=r.length;if(Object.keys(n).length!==i)return!1;while(i--)if(!t(e[r[i]],n[r[i]]))return!1;return!0}(t,e)}function ct(t,e,a){st(t,e)||(a.rerender&&clearTimeout(a.rerender),a.rerender=setTimeout((function(){return a.updateMap&&a.updateMap()}),10))}var ut=function(){function t(){Object(Y["a"])(this,t),this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0}return Object(tt["a"])(t,[{key:"$on",value:function(t,e){var a=this;return this.events[t]||(this.events[t]=[]),this.events[t].push(e),function(){a.events[t]=a.events[t].filter((function(t){return e!==t}))}}},{key:"$emit",value:function(t,e){var a=this.events[t];a&&a.forEach((function(t){return t(e)}))}}]),t}(),lt=new ut,mt=["fullscreenControl","geolocationControl","routeEditor","rulerControl","searchControl","trafficControl","typeSelector","zoomControl","routePanelControl"];function pt(t){return 0===t.filter((function(t){return![].concat(mt,["default"]).includes(t)})).length}function dt(t,e){var a=rt(t);if(!e)return a;switch(a){case"Placemark":return"Point";case"Polyline":return"LineString";default:return a}}function ft(t,e){var a=e?{type:"Feature",id:t.properties.markerId,geometry:{type:t.markerType,coordinates:t.coords},properties:t.properties,options:t.options}:new ymaps[t.markerType](t.coords,t.properties,t.options);return a.clusterName=t.clusterName,e||at(t.callbacks,a),a}function ht(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function gt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ht(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var bt={pluginOptions:{},data:function(){return{ymapEventBus:lt,ymapId:"yandexMap"+Math.round(1e5*Math.random()),myMap:{},style:this.ymapClass?"":"width: 100%; height: 100%;"}},props:{viewAllMarkers:{type:Boolean,default:!1},coords:{type:Array,validator:function(t){return!t.filter((function(t){return isNaN(t)})).length},required:!0},zoom:{validator:function(t){return!isNaN(t)},default:18},clusterOptions:{type:Object,default:function(){return{}}},clusterCallbacks:{type:Object,default:function(){return{}}},behaviors:{type:Array,default:function(){return["default"]}},controls:{type:Array,default:function(){return["default"]},validator:function(t){return pt(t)}},detailedControls:{type:Object,validator:function(t){var e=Object.keys(t);return pt(e)}},scrollZoom:{type:Boolean,default:!0},zoomControl:Object,mapType:{type:String,default:"map",validator:function(t){return["map","satellite","hybrid"].includes(t)}},placemarks:{type:Array,default:function(){return[]}},useObjectManager:{type:Boolean,default:!1},objectManagerClusterize:{type:Boolean,default:!0},ymapClass:String,initWithoutMarkers:{type:Boolean,default:!0},mapLink:String,debug:{type:Boolean,default:!1},settings:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}}},computed:{coordinates:function(){return this.coords.map((function(t){return+t}))}},methods:{getMarkersFromSlots:function(){return this.$slots.default&&this.$slots.default.map((function(t){var e=t.componentOptions&&t.componentOptions.propsData;if(e){var a={};if(e.balloonTemplate){var o=ymaps.templateLayoutFactory.createClass(e.balloonTemplate);a={balloonContentLayout:o}}var n={markerId:e.markerId,markerType:e.markerType,coords:it(e.coords),hintContent:e.hintContent,markerFill:e.markerFill,circleRadius:+e.circleRadius,clusterName:e.clusterName,markerStroke:e.markerStroke,balloon:e.balloon,callbacks:e.callbacks,properties:e.properties,options:e.options,balloonOptions:a};return!e.icon||"default#image"!==e.icon.layout&&"default#imageWithContent"!==e.icon.layout?n.icon=e.icon:(n.iconLayout=e.icon.layout,n.iconImageHref=e.icon.imageHref,n.iconImageSize=e.icon.imageSize,n.iconImageOffset=e.icon.imageOffset,e.icon.contentOffset&&(n.iconContentOffset=e.icon.contentOffset),e.icon.contentOffset&&ymaps.templateLayoutFactory&&(n.iconContentLayout=ymaps.templateLayoutFactory.createClass(e.icon.contentTemplate)),e.icon.content&&(n.iconContent=e.icon.content)),n}})).filter((function(t){return t&&t.markerType}))||[]},createMarkers:function(){for(var t=this,e=[],a=this.getMarkersFromSlots(),o=0;o<a.length;o++){var n=a[o],r=dt(n.markerType,this.useObjectManager),i={hintContent:n.hintContent,markerId:n.markerId};n.iconContent&&(i.iconContent=n.iconContent);var s=n.balloon?{balloonContentHeader:n.balloon.header,balloonContentBody:n.balloon.body,balloonContentFooter:n.balloon.footer}:{},c=Object.assign(i,s,n.properties),u=n.iconLayout?{iconLayout:n.iconLayout,iconImageHref:n.iconImageHref,iconImageSize:n.iconImageSize,iconImageOffset:n.iconImageOffset}:{preset:n.icon&&"islands#".concat(nt(n),"Icon")};n.iconContentLayout&&(u.iconContentLayout=n.iconContentLayout),n.iconContentOffset&&(u.iconContentOffset=n.iconContentOffset);var l=n.markerStroke?{strokeColor:n.markerStroke.color||"0066ffff",strokeOpacity:parseFloat(n.markerStroke.opacity)>=0?parseFloat(n.markerStroke.opacity):1,strokeStyle:n.markerStroke.style,strokeWidth:parseFloat(n.markerStroke.width)>=0?parseFloat(n.markerStroke.width):1}:{},m=n.markerFill?{fill:n.markerFill.enabled||!0,fillColor:n.markerFill.color||"0066ff99",fillOpacity:parseFloat(n.markerFill.opacity)>=0?parseFloat(n.markerFill.opacity):1,fillImageHref:n.markerFill.imageHref||""}:{},p=Object.assign(u,l,m,n.balloonOptions,n.options);"Circle"===r&&(n.coords=[n.coords,n.circleRadius]);var d={properties:c,options:p,markerType:r,coords:n.coords,clusterName:n.clusterName,callbacks:n.callbacks},f=ft(d,this.useObjectManager);e.push(f)}return this.placemarks&&this.placemarks.forEach((function(a){var o=a.markerType,n=void 0===o?"Placemark":o,r=a.properties,i=a.options,s=void 0===i?{}:i,c=a.coords,u=a.clusterName,l=a.callbacks,m=a.balloonTemplate,p=dt(n,t.useObjectManager);if(m){var d=ymaps.templateLayoutFactory.createClass(m);s.balloonContentLayout=d}var f={properties:r,options:s,markerType:p,coords:c,clusterName:u,callbacks:l},h=ft(f,t.useObjectManager);e.push(h)})),e},setMarkers:function(){var t={options:this.clusterOptions,callbacks:this.clusterCallbacks,map:this.myMap,useObjectManager:this.useObjectManager,objectManagerClusterize:this.objectManagerClusterize};ot(this.createMarkers(),t)},init:function(){var t=this;if(window.ymaps&&ymaps.GeoObjectCollection&&(this.initWithoutMarkers||this.$slots.default||this.placemarks.length)){if(this.$emit("map-initialization-started"),this.myMap=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom,behaviors:this.behaviors,controls:this.controls,type:"yandex#".concat(this.mapType)},this.options),this.myMap.events.add("click",(function(e){return t.$emit("click",e)})),this.zoomControl&&(this.myMap.controls.remove("zoomControl"),this.myMap.controls.add(new ymaps.control.ZoomControl(this.zoomControl))),this.detailedControls){var e=Object.keys(this.detailedControls);e.forEach((function(e){t.myMap.controls.remove(e),t.myMap.controls.add(e,t.detailedControls[e])}))}!1===this.scrollZoom&&this.myMap.behaviors.disable("scrollZoom"),this.setMarkers(),this.viewAllMarkers&&this.myMap.setBounds(this.myMap.geoObjects.getBounds()),this.$emit("map-was-initialized",this.myMap)}}},watch:{coordinates:function(t){this.myMap.panTo&&this.myMap.panTo(t)},placemarks:function(){window.ymaps&&(this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.setMarkers())},zoom:function(){this.myMap.setZoom(this.zoom)}},render:function(t){return t("section",{class:"ymap-container",ref:"mapContainer"},[t("div",{attrs:{id:this.ymapId,class:this.ymapClass,style:this.style}}),t("div",{ref:"markersContainer",attrs:{class:"ymap-markers"}},[this.$slots.default])])},mounted:function(){var t=this;this.markerObserver=new MutationObserver(function(){this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.setMarkers()}.bind(this)),this.mapObserver=new MutationObserver(function(){this.myMap.container.fitToViewport()}.bind(this));var e=this.$refs,a=e.markersContainer,o=e.mapContainer;if(this.markerObserver.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),this.mapObserver.observe(o,{attributes:!0,childList:!0,characterData:!0,subtree:!1}),this.ymapEventBus.scriptIsNotAttached){var n=document.createElement("SCRIPT"),r=gt({},this.$options.pluginOptions,{},this.settings),i=r.apiKey,s=void 0===i?"":i,c=r.lang,u=void 0===c?"ru_RU":c,l=r.version,m=void 0===l?"2.1":l,p=r.coordorder,d=void 0===p?"latlong":p,f=this.debug?"debug":"release",h="lang=".concat(u).concat(s&&"&apikey=".concat(s),"&mode=").concat(f,"&coordorder=").concat(d),g=this.mapLink||"https://api-maps.yandex.ru/".concat(m,"/?").concat(h);n.setAttribute("src",g),n.setAttribute("async",""),n.setAttribute("defer",""),document.body.appendChild(n),this.ymapEventBus.scriptIsNotAttached=!1,n.onload=function(){t.ymapEventBus.ymapReady=!0,t.ymapEventBus.$emit("scriptIsLoaded")}}this.ymapEventBus.ymapReady?ymaps.ready(this.init):this.ymapEventBus.$on("scriptIsLoaded",(function(){t.ymapEventBus.updateMap=function(){t.myMap.geoObjects&&t.myMap.geoObjects.removeAll(),t.setMarkers()},ymaps.ready(t.init)}))},beforeDestroy:function(){this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.markerObserver.disconnect()}},yt=(a("c5f6"),{data:function(){return{ymapEventBus:lt,unwatchArr:[]}},props:{coords:{type:Array,required:!0},hintContent:String,icon:Object,balloon:Object,markerType:{type:String,required:!0},markerFill:Object,markerStroke:Object,clusterName:String,circleRadius:{validator:function(t){return!isNaN(t)},default:1e3},callbacks:Object,balloonTemplate:String,markerId:{type:[String,Number],required:!0},properties:Object,options:Object},render:function(){},mounted:function(){var t=this;for(var e in this.$props)this.unwatchArr.push(this.$watch(e,(function(e,a){return ct(e,a,t.ymapEventBus)})))},beforeDestroy:function(){this.unwatchArr.forEach((function(t){return t()}))}}),vt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bt.pluginOptions=e,t.component("yandex-map",bt),t.component("ymap-marker",yt)};bt.install=vt,"undefined"!==typeof window&&window.Vue&&window.Vue.use(bt);var kt=bt,wt=a("58ca"),Ot=a("9029"),St=a("9001"),Pt=a("a670"),Ct=a("4e68"),jt=a.n(Ct);Ot["isMobileOnly"]&&(window.location.href="https://m.zemskidki.ru"+window.location.pathname+window.location.search+window.location.hash);var Lt={apiKey:"",lang:"ru_RU",version:"2.1"};i.a.interceptors.response.use((function(t){return t.data.version&&"1.2.5"!=t.data.version&&t.data.version!=X.state.notifyPageVersion&&(X.dispatch("popups/open",{name:"notifyPageReset"}),X.commit("setNotifyPageVersion",t.data.version)),t}),(function(t){return Promise.reject(t)})),n["a"].use(Pt["a"]),n["a"].use(k.a),n["a"].use(kt,Lt),n["a"].use(wt["a"]),n["a"].use(St["a"]),n["a"].use(jt.a,{token:"false"}),n["a"].config.productionTip=!1,l.beforeEach((function(t,e,a){switch(document.getElementsByTagName("body")[0].style.background=null,document.getElementsByTagName("body")[0].classList.remove("page-about"),document.getElementsByTagName("body")[0].classList.remove("page-about-clear"),document.getElementsByTagName("body")[0].classList.remove("supplier-page"),document.getElementsByTagName("body")[0].classList.remove("icon-bg"),document.getElementsByTagName("body")[0].classList.remove("no-b-padding"),t.name){case"about":document.getElementsByTagName("body")[0].classList.add("page-about-clear");break;case"deposit":document.getElementsByTagName("body")[0].classList.add("no-b-padding");break;case"statistic":document.getElementsByTagName("body")[0].classList.add("page-statistic");break;case"faq":document.getElementsByTagName("body")[0].classList.add("icon-bg");break;case"newCooperation":document.getElementsByTagName("body")[0].classList.add("no-b-padding");break;case"newSupplier":document.getElementsByTagName("body")[0].classList.add("no-b-padding");break;case"contacts":document.getElementsByTagName("body")[0].classList.add("icon-bg");break;case"cooperation":document.getElementsByTagName("body")[0].classList.add("icon-bg");break}"statistic"==e.name&&document.getElementsByTagName("body")[0].classList.remove("page-statistic"),t.name===e.name&&"catalogList"===t.name&&(window.app.$store.commit("actions/setCouponList",{items:[]}),window.app.$store.commit("actions/setPage",0),window.app.$store.commit("actions/previousSection",t.params.sid),window.app.$store.dispatch("actions/activeCategory",{currentSection:t.params.sid,isLoad:!0})),window.app.$store&&t.name!==e.name&&"catalogList"===t.name&&(window.app.$store.commit("actions/setCouponList",{items:[]}),window.app.$store.commit("actions/setPage",0)),a()}));var Tt=new n["a"]({router:l,store:X,render:function(t){return t(s["a"])}});window.app=Tt,Tt.$mount("#app"),l.beforeEach((function(t,e,a){var o=!1;"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")||(window.app.$store.dispatch("auth/logout"),window.app.localStorage.token=!1,"personal"===t.name&&(o=!0)),o||a()})),window.cookieHelper={readCookie:function(t){for(var e=t+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){var n=a[o];while(" "===n.charAt(0))n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null}};var It={apiKey:"AIzaSyCurbvjR1WeuFnAcmfEql0eXLYLV2rPR1c",authDomain:"zemskidki-62629.firebaseapp.com",databaseURL:"https://zemskidki-62629.firebaseio.com",projectId:"zemskidki-62629",storageBucket:"zemskidki-62629.appspot.com",messagingSenderId:"529394168677",appId:"1:529394168677:web:bc3025b2a9e0257a32e78c"};if(firebase.initializeApp(It),window.notify_subscribe=function(){var t=firebase.messaging();t.requestPermission().then((function(){t.getToken().then((function(t){console.log(t),t?window.sendTokenToServer(t):(console.warn("Не удалось получить токен."),window.setTokenSentToServer(!1))})).catch((function(t){console.warn("При получении токена произошла ошибка.",t),window.setTokenSentToServer(!1)}))})).catch((function(t){console.warn("Не удалось получить разрешение на показ уведомлений.",t)}))},window.sendTokenToServer=function(t){if(window.isTokenSentToServer(t))console.log("Токен уже отправлен на сервер.");else{console.log("Отправка токена на сервер...");var e=new FormData;e.append("notify_token",t),i.a.post("https://api.zemskidki.ru/public/v1/public/notify/",e,{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0}),window.setTokenSentToServer(t)}},window.isTokenSentToServer=function(t){return window.localStorage.getItem("sentFirebaseMessagingToken")==t},window.setTokenSentToServer=function(t){window.localStorage.setItem("sentFirebaseMessagingToken",t||"")},"Notification"in window){firebase.messaging();"granted"===Notification.permission.toLowerCase()&&window.notify_subscribe()}}});
//# sourceMappingURL=index.1642f3d1.js.map