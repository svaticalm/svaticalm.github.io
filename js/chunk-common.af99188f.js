(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"004b":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));o("a481"),o("7618"),o("6b54");function n(t){var e=t.replace(/[^\+0-9]/g,"");return!(e.length<12||"9"!==e[2])}},"1a7e":function(t,e,o){"use strict";o("a481");var n,i=o("7618"),r=o("bd86"),a=o("bc3a"),s=o.n(a),c=o("b643"),u=o("2b27"),l=o.n(u),d=o("2b0e"),m=o("4328"),p=o.n(m),f=(n={user:{permission:[]},userPhone:"",isBannedPermanent:!1},Object(r["a"])(n,"isBannedPermanent",!1),Object(r["a"])(n,"isLoaded",!1),Object(r["a"])(n,"cookiesWarning",!1),Object(r["a"])(n,"hasCookiesFirstVisit",!1),Object(r["a"])(n,"firstVisitRedirect",!1),n),h={getUser:function(){return f.user},firstVisit:function(){var t=l.a.get("firstVisit")||f.hasCookiesFirstVisit;return t=null===t||"false"!==t,t}},v={getCurrent:function(t){return new Promise((function(e,o){"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")?s.a.get("https://api.zemskidki.ru/public/v1/user/users/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0}).then((function(o){t.commit("setLoaded",!0),"object"===Object(i["a"])(o.data)&&0===+o.data.error?o.data.result.user?t.commit("setUser",o.data.result):t.dispatch("auth/clearUserAuthInfo",!1,{root:!0}):(401===+o.data.error&&t.dispatch("auth/logout",{},{root:!0}),402===+o.data.error&&(t.commit("setBanPermanent"),t.commit("setUserPhone",o.data.result.user.login)),402===!o.data.error&&t.dispatch("auth/clearUserAuthInfo",!1,{root:!0})),e()})).catch((function(t){e()})):s.a.get("https://api.zemskidki.ru/public/v1/public/users/",{headers:c["a"],withCredentials:!0}).then((function(e){if(t.commit("setLoaded",!0),e.data.error>0)switch(+e.data.error){case 403:t.commit("auth/setBan",!0,{root:!0});break}})).catch((function(t){}))}))},save:function(t){s.a.put("https://api.zemskidki.ru/public/v1/user/users/",{},{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0,params:{firstName:t.rootState.auth.forms.registration.fields.firstName.value,lastName:t.rootState.auth.forms.registration.fields.lastName.value,secondName:t.rootState.auth.forms.registration.fields.secondName.value,email:t.rootState.auth.forms.registration.fields.email.value},paramsSerializer:function(t){return p.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(e){"object"===Object(i["a"])(e.data)&&0===+e.data.error?t.commit("users/setUser",e.data.result,{root:!0}):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){}))},checkPhone:function(t,e){return new Promise((function(t,o){s.a.get("https://api.zemskidki.ru/public/v1/public/users/",{headers:{"Content-Type":"application/json;charset=utf-8"},withCredentials:!0,params:{checkPhone:!0,phone:e.phone},paramsSerializer:function(t){return p.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(e){"object"===Object(i["a"])(e.data)&&0===+e.data.error?t(e.data.result.status):o()})).catch((function(t){o()}))}))},getCookiesWarning:function(t){var e=l.a.get("cookiesWarning");null!==e?("false"===e&&(e=!1),t.commit("setCookiesWarning",e)):t.commit("setCookiesWarning",!0)}},g={setUser:function(t,e){"object"===Object(i["a"])(e)&&void 0!==e.user&&d["a"].set(t,"user",e.user)},setCookiesWarning:function(t,e){d["a"].set(t,"cookiesWarning",e)},hideCookiesWarning:function(t){d["a"].set(t,"cookiesWarning",!1),l.a.set("cookiesWarning",!1,31104e3)},setCookiesFirstVisit:function(){l.a.set("firstVisit",!1,15552e4),f.hasCookiesFirstVisit=!0,f.firstVisitRedirect=!0},unsetFirstVisitRedirect:function(){f.firstVisitRedirect=!1},pushOpinion:function(t,e){void 0===t.user.opinions&&d["a"].set(t.user,"opinions",[]),t.user.opinions.push({id:e.id,action:e.action})},setLoaded:function(t,e){d["a"].set(t,"isLoaded",e)},setBanPermanent:function(t,e){t.isBannedPermanent=!0},setUserPhone:function(t,e){t.userPhone=e.replace(/\+7/g,"")}};e["a"]={namespaced:!0,state:f,getters:h,actions:v,mutations:g}},"1f24":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.tooltipClose,expression:"tooltipClose"}],ref:"tooltipWrap",staticClass:"w-tooltip",class:t.addClassWrap},[o("span",{ref:"tooltipBtn",staticClass:"tooltip__btn",class:t.addClassBtn,on:{click:function(e){return e.preventDefault(),t.btnClick(e)}}},[t._t("tooltipBtn")],2),o("transition",{attrs:{name:"fade-popup"}},[t.show?o("div",{ref:"tooltip",staticClass:"tooltip",class:[t.addClass,t.direction],style:t.addStyle},[t.isBtnClose?o("div",{staticClass:"tooltip__close",on:{click:function(e){return e.preventDefault(),t.btnClick(e)}}}):t._e(),o("div",{staticClass:"tooltip__content",style:{padding:t.isPadding?"":"0"}},[t._t("tooltipContent")],2)]):t._e()])],1)},i=[],r=(o("7f7f"),{name:"Tooltip",data:function(){return{show:!1}},props:{direction:{default:"bottom-center-direction"},addStyle:{default:""},addClass:{default:""},addClassWrap:{default:""},addClassBtn:{default:""},tempID:{default:""},isBtnClose:{default:function(){return!0}},isPadding:{default:function(){return!0}}},methods:{btnClick:function(){this.show?this.tooltipClose():this.tooltipShow()},tooltipClose:function(){var t=this;this.show=!1,setTimeout((function(){t.$emit("tooltipclose",t.tempID)}),100)},tooltipShow:function(){this.show=!0,this.$emit("tooltipshow",this.tempID)}},directives:{clickoutside:{bind:function(t,e,o){if("function"!==typeof e.value){var n=o.context.name;"[Vue-click-outside:] provided expression '".concat(e.expression,"' is not a function, but has to be");n&&"Found in component '".concat(n,"'")}var i=e.modifiers.bubble,r=function(o){(i||!t.contains(o.target)&&t!==o.target&&!o.target.classList.contains("click-outside-tooltip"))&&e.value(o)};t.__vueClickOutside__=r,document.addEventListener("click",r)},unbind:function(t,e){document.removeEventListener("click",t.__vueClickOutside__),t.__vueClickOutside__=null}}}}),a=r,s=(o("2b35"),o("2877")),c=Object(s["a"])(a,n,i,!1,null,"4cb1c58d",null);e["a"]=c.exports},"21aa":function(t,e,o){"use strict";o("8e6e"),o("456d"),o("7514");var n=o("bd86"),i=(o("386d"),o("7618")),r=(o("55dd"),o("7f7f"),o("75fc")),a=(o("ac4d"),o("8a81"),o("ac6a"),o("5df3"),o("4f7f"),o("bc3a")),s=o.n(a),c=o("ab0e"),u=o.n(c),l=o("4328"),d=o.n(l),m=o("b643"),p=o("2b27"),f=o.n(p),h=o("2b0e");function v(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function g(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?v(Object(o),!0).forEach((function(e){Object(n["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}u()(s.a,{debug:!1});var b=s.a.CancelToken,y={categories:new Set,coupons:[],breadcrumbs:[],detail:{},isLoadNextPage:!0,showSectionMenu:!1,hidePromo:!1,isLoad:!1,isLoadDetail:!1,viewType:"",showMap:!1,previousSection:0,coopTab:"",sort:{current:{order:"new",by:"desc",name:"Новизне"},order:{price:{code:"price",name:"Экономии"},discount:{code:"discount",name:"Скидке"},popular:{code:"popular",name:"Популярности"},new:{code:"new",name:"Новизне"}},by:{asc:"asc",desc:"desc"},show:!1},page:1,favorites:{items:[],section:[]},visited:{items:[]},cancelToken:!1,scrollToCoupon:!1,couponId:"",scrollToCatalogList:!1},w=function t(e,o){var n=!1,i=!0,r=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(u.id===o&&(n=u),!n&&u.sections.size>0){var l=t(u.sections,o);l&&(n=l)}if(n)break}}catch(d){r=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n},k=function t(e,o){var n=!1,i=[],a=!0,s=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var d=u.value;if(d.id===o&&(n=d,i.push(d)),!n&&d.sections.size>0){var m=t(d.sections,o);m&&(n=m,i=[].concat(Object(r["a"])(i),[m]))}if(n)break}}catch(p){s=!0,c=p}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}return i},C={getTitle:function(t,e,o,n){return function(e){var n,i=w(t.categories,e);return e||(n="Все скидки г. "+o.cities.current.name),i&&(n=i.name),n}},getTotalCoupons:function(t){var e=0,o=!0,n=!1,i=void 0;try{for(var r,a=t.categories[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var s=r.value;e+=s.count}}catch(c){n=!0,i=c}finally{try{o||null==a.return||a.return()}finally{if(n)throw i}}return e},getCurrentSort:function(t){return t.sort.current.name},getCoopTab:function(t){return t.coopTab},getCouponsBySection:function(t){return function(e){var o=[];if(t.coupons.length>0)if(e>0){var n=!0,i=!1,r=void 0;try{for(var a,s=t.coupons[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c.id===e&&o.push(c)}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}else o=t.coupons;else o=[];return o}},getFavorites:function(t){return function(e){var o=[];if(t.coupons.length>0){var n=!0,i=!1,r=void 0;try{for(var a,s=t.coupons[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c.favorite&&o.push(c)}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}else o=[];return o}}},S={activeCategory:function(t,e){var o=w(y.categories,e.currentSection);o.count>0&&!y.isLoad?(t.commit("activeCategory",{currentSection:e.currentSection}),t.commit("hideMap"),t.dispatch("initialCouponState"),!0===e.isLoad&&t.dispatch("getCouponList",{currentSection:e.currentSection,reload:!0})):t.dispatch("initialCouponState")},goCoupon:function(t,e){t.commit("setViewType","detail"),y.detail&&e.id===y.detail.id||t.dispatch("initDetailPage",{route:{params:{id:e.id}}})},getCategoriesList:function(t,e){(0===y.categories.size||e.reload)&&s.a.get("https://api.zemskidki.ru/public/v1/public/categories/",{headers:m["a"],withCredentials:!0,params:{city:t.rootState.cities.current.xmlId}}).then((function(o){if("object"===Object(i["a"])(o.data)&&0===+o.data.error&&(void 0!==e&&e.currentSection&&(o.data.result.currentSection=e.currentSection),t.commit("setCategoriesList",o.data.result),void 0!==e&&e.currentSection)){var n=k(y.categories,e.currentSection);n.pop(),t.commit("setBreadcrumbs",n)}})).catch((function(t){}))},getCouponList:function(t,e){return new Promise((function(o,n){if(!y.isLoad&&y.isLoadNextPage||e.reload){s.a.cancelAll(),t.commit("setLoad",!0),e.reload&&t.commit("isLoadNextPage",!0);var r={sort:y.sort.current,page:y.page};if(t.commit("setBreadcrumbs",[]),e.currentSection){r.section=e.currentSection;var a=k(y.categories,e.currentSection);a.pop(),t.commit("setBreadcrumbs",a)}!0===e.isSearch&&(r.q=t.rootState.search.query),!0===e.favorites&&(r.favorites=g({},y.favorites.items),t.commit("setSectionFavorites",[])),!0===e.visited&&(r.visited=g({},y.visited.items),r.section=""),!0!==e.favorites&&!0!==e.visited&&(r.city=t.rootState.cities.current.xmlId),s.a.get("https://api.zemskidki.ru/public/v1/public/coupons/",{requestId:"getCouponList",cancelToken:new b((function(e){t.commit("setCancelToken",e)})),withCredentials:!0,params:r,paramsSerializer:function(t){return d.a.stringify(t,{arrayFormat:"repeat"})},headers:m["a"]}).then((function(n){t.commit("setLoad",!1),o(),e.reload&&t.commit("setCouponList",{items:[]}),"object"===Object(i["a"])(n.data)&&0===+n.data.error&&(void 0!==e&&e.currentSection&&(n.data.result.currentSection=e.currentSection),t.commit("setCouponList",n.data.result),n.data.result.sectionFavorites&&t.commit("setSectionFavorites",n.data.result.sectionFavorites),y.favorites.items.length<10&&!0===e.favorites||y.visited.items.length<3&&!0===e.visited||null===n.data.result.items||void 0===n.data.result.items?t.commit("isLoadNextPage",!1):t.commit("isLoadNextPage",n.data.result.isLoadNextPage),!0!==e.visited&&t.commit("incrementPage"))})).catch((function(e){t.commit("setLoad",!1),o()}))}}))},getSimilars:function(t,e){return new Promise((function(o,n){if(!y.isLoad&&y.isLoadNextPage){t.commit("setLoad",!0);var r={page:y.page,similar:e.id,city:t.rootState.cities.current.xmlId,sort:{order:"popular",by:"desc"}};s.a.get("https://api.zemskidki.ru/public/v1/public/coupons_similar/",{withCredentials:!0,params:r,paramsSerializer:function(t){return d.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(e){"object"===Object(i["a"])(e.data)&&0===+e.data.error?(t.commit("setCouponDetailSimilar",e.data.result.similar),t.commit("isLoadNextPage",e.data.result.isLoadNextPage)):"object"!==Object(i["a"])(e.data)?t.commit("setErrorLoad",!0):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0}),t.commit("incrementPage"),t.commit("setLoad",!1),o()})).catch((function(t){o()}))}else o()}))},getViewType:function(t,e){var o,n=e.id,i=w(y.categories,n);if(n>0)if(i)o="list";else{var r=y.coupons.filter((function(t){return+t.id===+n}));o=r.length>0?"detail":"notFound"}else o="list";t.commit("setViewType",o)},setFavorite:function(t,e){var o=f.a.get("favorites");null===o&&(o={items:[]});var n=o.items.indexOf(e.id);-1!==n?o.items.splice(n,1):o.items.push(e.id),f.a.set("favorites",o),e.isDetail?t.commit("updateCouponDetail",e):e.isSimilar?t.commit("updateCouponSimilar",e):t.commit("updateCoupon",e),t.commit("setFavorites",o.items)},setFavoritesCookies:function(t){var e=f.a.get("favorites");null!==e&&t.commit("setFavorites",e.items)},setVisited:function(t,e){var o=f.a.get("visited");null===o&&(o={items:[]});var n=o.items.indexOf(e.id);-1===n&&(o.items.push(e.id),f.a.set("visited",o),t.commit("setVisited",o.items))},setVisitedCookies:function(t){var e=f.a.get("visited");null!==e&&t.commit("setVisited",e.items)},initialCouponState:function(t){t.commit("isLoadNextPage",!0),t.commit("setPage",1),t.commit("setCouponList",{items:[]}),t.commit("setViewType","list"),t.commit("hideMap")},initialSearchState:function(t){t.commit("isLoadNextPage",!0),t.commit("setPage",1),t.commit("setCouponList",{items:[]}),t.commit("setViewType","list"),t.commit("hideMap")},initialCatalogState:function(t,e){t.commit("isLoadNextPage",!0),t.commit("setPage",1),t.commit("hideMap"),t.commit("setCouponList",{items:[]}),"function"===typeof y.cancelToken&&(y.cancelToken(),t.commit("setCancelToken",!1))},initDetailPage:function(t,e){return new Promise((function(o,n){t.commit("opinions/clearData",{},{root:!0}),t.commit("setCouponDetail",{}),t.commit("isLoadNextPage",!0),t.commit("setPage",1),y.isLoadDetail||void 0===e.route.params.id?o():(t.commit("setLoadDetail",!0),s.a.get("https://api.zemskidki.ru/public/v1/public/coupons/"+e.route.params.id,{withCredentials:!0,params:{pageSize:3,city:t.rootState.cities.current.xmlId,sort:{order:"popular",by:"desc"}},paramsSerializer:function(t){return d.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(n){if(t.commit("setLoadDetail",!1),!1===n.data.result.item||"notFound"===n.data.result.viewType);else if("object"===Object(i["a"])(n.data)&&0===+n.data.error){var r=f.a.get("favorites");null===r&&(r={items:[]});var a=r.items.indexOf(e.route.params.id);for(var s in n.data.result.item.favorite=-1!==a,n.data.result.item.similars){var c=r.items.indexOf(n.data.result.item.similars[s].id);n.data.result.item.similars[s].favorite=-1!==c}t.commit("setCouponDetail",n.data.result),t.dispatch("setVisited",n.data.result.item)}else 401===+n.data.error&&t.dispatch("auth/logout",{},{root:!0});o()})).catch((function(e){t.commit("setLoadDetail",!1),o()})))}))},getMarkersByAddresses:function(t,e){return new Promise((function(o,n){for(var r in e)setTimeout((function(){s.a.get("https://api.zemskidki.ru/public/v1/"+e.type+"/menus/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},params:{type:"action"},paramsSerializer:function(t){return d.a.stringify(t,{arrayFormat:"repeat"})},withCredentials:!0}).then((function(e){"object"===Object(i["a"])(e.data)&&0===+e.data.error?(t.commit("setActionMenu",e.data.result),o()):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){n()}))}),2e3)}))}},O=function t(e,o){var n=new Set,i=!0,r=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,l=u;if(l.show=+l.id===+o,u.sections.size>0||l.sections.length>0){h["a"].set(l,"sections",t(l.sections,o));var d=!0,m=!1,p=void 0;try{for(var f,v=l.sections[Symbol.iterator]();!(d=(f=v.next()).done);d=!0){var g=f.value;!0===g.show&&(l.show=!0)}}catch(b){m=!0,p=b}finally{try{d||null==v.return||v.return()}finally{if(m)throw p}}}n.add(l)}}catch(b){r=!0,a=b}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n},P=function(t,e){var o=new Set,n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,u=c;+c.id===+e?u.show=!c.show:(c.sections.size>0||u.sections.length>0)&&(c.sections=P(c.sections,e)),o.add(u)}}catch(l){i=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return o},j={setCategoriesList:function(t,e){h["a"].set(t,"categories",O(e.items,e.currentSection))},setCoopTab:function(t,e){t.coopTab=e},setCouponList:function(t,e){if(null!==e&&null!==e.items)for(var o in t.page<2&&(t.coupons=[]),e.items)e.items.hasOwnProperty(o)&&function(){var n=e.items[o];-1!==t.favorites.items.indexOf(n.id)&&(n.favorite=!0);var i=t.coupons.find((function(t){return+t.id===+n.id}));i||t.coupons.push(n)}()},setCouponDetailSimilar:function(t,e){if(null!==e&&null!==e.items)for(var o in t.page<2&&(t.detail.similars=[]),e.items)e.items.hasOwnProperty(o)&&function(){var n=e.items[o];-1!==t.favorites.items.indexOf(n.id)&&(n.favorite=!0);var i=t.detail.similars.find((function(t){return+t.id===+n.id}));i||t.detail.similars.push(n)}()},updateCouponDetail:function(t,e){h["a"].set(t.detail,"favorite",!e.favorite)},updateCoupon:function(t,e){for(var o in t.coupons)e.id===t.coupons[o].id&&(e.favorite=!e.favorite,h["a"].set(t.coupons,o,e))},updateCouponSimilar:function(t,e){for(var o in t.detail.similars)e.id===t.detail.similars[o].id&&(e.favorite=!e.favorite,h["a"].set(t.detail.similars,o,e))},setCouponDetail:function(t,e){h["a"].set(t,"detail",e.item)},incrementCouponDetailCountOpinion:function(t){h["a"].set(t.detail,"opinionCount",t.detail.opinionCount+1)},activeCategory:function(t,e){t.categories=O(t.categories,e.currentSection)},toggleSection:function(t,e){t.categories=P(t.categories,e.currentSection)},isLoadNextPage:function(t,e){t.isLoadNextPage=e},setViewType:function(t,e){t.viewType=e},toggleMap:function(t){t.showMap=!t.showMap},hideMap:function(t){t.showMap=!1},setLoad:function(t,e){t.isLoad=e},setLoadDetail:function(t,e){t.isLoadDetail=e},setSort:function(t,e){t.sort.current=e},setShowSort:function(t,e){t.sort.show=e},setPage:function(t,e){t.page=e},incrementPage:function(t){t.page++},setFavorites:function(t,e){t.favorites.items=e},setSectionFavorites:function(t,e){t.favorites.section=e},setVisited:function(t,e){t.visited.items=e},previousSection:function(t,e){t.previousSection=e},setCancelToken:function(t,e){t.cancelToken=e},setCouponToScroll:function(t,e){t.couponId=e,t.scrollToCoupon=!0},cancelCouponToScroll:function(t){t.scrollToCoupon=!1,t.couponId=""},scrollToCatalogList:function(t,e){t.scrollToCatalogList=e},sectionMenuOpen:function(t,e){t.showSectionMenu=!0,document.getElementsByTagName("body")[0].classList.add("nonscroll")},sectionMenuClose:function(t,e){t.showSectionMenu=!1,document.getElementsByTagName("body")[0].classList.remove("nonscroll")},setBreadcrumbs:function(t,e){t.breadcrumbs=e}};e["a"]={namespaced:!0,state:y,getters:C,actions:S,mutations:j}},2988:function(t,e,o){"use strict";var n=o("7618"),i=(o("7514"),o("bc3a")),r=o.n(i),a=(o("4328"),o("b643")),s=(o("2b27"),{pageContent:[]}),c={getPageContent:function(t){return function(e){var o=t.pageContent.find((function(t){return+t.id===+e}));return void 0!==o?o:{}}}},u={getPageContent:function(t,e){if("undefined"!==typeof e.pageContentID&&(0===t.state.pageContent.length||0===t.state.pageContent.filter((function(t){return+t.id===+e.pageContentID})).length)){var o={};o.ID=e.pageContentID,r.a.get("https://api.zemskidki.ru/public/v1/public/content/",{headers:a["a"],params:o}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error&&t.commit("setPageContent",e.data.result)})).catch((function(t){}))}}},l={setPageContent:function(t,e){t.pageContent.push(e.item)}};e["a"]={namespaced:!0,state:s,getters:c,actions:u,mutations:l}},"2b35":function(t,e,o){"use strict";var n=o("4100"),i=o.n(n);i.a},"36a3":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"user-blocked"},[n("svg",{staticClass:"icon mb8"},[n("use",{attrs:{"xlink:href":o("973d")+"#emoji-stop"}})]),n("div",{staticClass:"text-color-red text-center text-size-l text-bold"},[t._v("\n            Пользователь"),n("br"),t._v("\n            #"+t._s(t.userPhone)),n("br"),t._v("\n            заблокирован!\n        ")]),n("div",{staticClass:"text-size-m text-center mt8"},[t._v("\n            Если это произошло по ошибке,"),n("br"),t._v("\n            напишите руководителю проекта"),n("br"),t._v("\n            на "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.openMailZems()}}},[t._v("skidki@zems.pro")])])])])},i=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("bd86")),a=o("2f62");function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var u={name:"ManyAuth",methods:{close:function(t){this.$store.commit("popups/close",{name:t})}},computed:c({},Object(a["b"])({popups:function(t){return t.popups.items},userPhone:function(t){return t.users.userPhone}}))},l=u,d=o("2877"),m=Object(d["a"])(l,n,i,!1,null,"743e1a3f",null);e["a"]=m.exports},4100:function(t,e,o){},"45e9":function(t,e,o){"use strict";var n=o("cefd"),i=o.n(n);i.a},"49e7":function(t,e,o){"use strict";var n=o("7618"),i=o("bc3a"),r=o.n(i),a=(o("4328"),o("b643")),s=(o("2b27"),o("2b0e")),c={data:{},status:!1},u={getList:function(t){return function(e){return t.data}}},l={getList:function(t,e){var o={};r.a.get("https://api.zemskidki.ru/public/v1/public/mail/",{headers:a["a"],params:o}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error&&t.commit("setData",e.data.result)})).catch((function(t){}))},sendMessage:function(t,e){var o={message:e.message};r.a.get("https://api.zemskidki.ru/public/v1/public/mail/",{headers:a["a"],params:o}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error&&t.commit("setStatus",e.data.error)})).catch((function(t){}))}},d={setData:function(t,e){s["a"].set(t,"data",e.items)},setStatus:function(t,e){s["a"].set(t,"status",!e.error)}};e["a"]={namespaced:!0,state:c,getters:u,actions:l,mutations:d}},"516f":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-block",class:[{open:t.show},t.addClass]},[n("transition",{attrs:{name:"fade-popup"}},[t.show?n("div",{staticClass:"popup"},[t.isSetBlank?t._e():n("div",{staticClass:"popup-header"},[n("div",{staticClass:"popup-name"},[t._v(t._s(t.title))]),t.isBtnClose?n("div",{staticClass:"close",on:{click:t.close}},[n("span",{staticClass:"i icon-close"},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":o("973d")+"#close"}})])])]):t._e()]),n("div",{ref:"overlayPopup",class:{"popup-content":!t.isSetBlank}},[n("div",{class:{inner:!t.isSetBlank}},[t._t("default")],2)])]):t._e()])],1)},i=[],r=(o("7f7f"),{name:"Popup",props:{width:{default:function(){return 320}},addClass:{default:""},show:{default:function(){return!1}},isSetTop:{default:function(){return!1}},isBtnClose:{default:function(){return!0}},isSetStyled:{default:function(){return!1}},isSetBlank:{default:function(){return!1}},isResize:{default:function(){return!1}},name:"",title:{default:""}},watch:{show:function(){this.show&&(this.isSetTop&&this.updateViewportSize(),document.getElementsByTagName("body")[0].classList.add("nonscroll"))},isResize:function(t,e){this.isSetTop&&t!==e&&this.updateViewportSize()}},data:function(){return{top:20}},mounted:function(){this.isSetTop&&this.topListener()},methods:{updateViewportSize:function(){this.$nextTick((function(){if("undefined"!==typeof this.$refs.overlayPopup){var t=this.getViewportSize().h-this.$refs.overlayPopup.clientHeight;t<1&&(t=1),this.top=t/2}}))},updatePopupStyled:function(){this.$nextTick((function(){this.$refs.overlayPopup.classList.add("popup--styled")}))},topListener:function(){var t=this;this.$nextTick((function(){t.updateViewportSize(),window.addEventListener("resize",t.updateViewportSize)}))},getViewportSize:function(){var t=window.document.querySelector("html");return{w:t.clientWidth,h:t.clientHeight}},close:function(){this.show&&this.name?(this.$store.commit("popups/close",{name:this.name}),this.$emit("close"),document.getElementsByTagName("body")[0].classList.remove("nonscroll")):(this.$emit("close"),document.getElementsByTagName("body")[0].classList.remove("nonscroll")),this.$refs.overlayPopup.scrollTop=0}}}),a=r,s=(o("e70d"),o("2877")),c=Object(s["a"])(a,n,i,!1,null,"177e8b82",null);e["a"]=c.exports},"557e":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(t.tag,{tag:"component",staticClass:"btn",class:t.style,attrs:{href:"#",disabled:t.disabled}},[t._t("default")],2)},i=[],r={props:{type:{default:function(){return"normal"}},tag:{type:String,default:"a"},size:{type:String,default:"normal"}},computed:{disabled:function(){return"normal"!=this.type},style:function(){return"load"==this.type?"btn--preloader "+("small"===this.size?"size-s":""):"ok"==this.type?"btn--preloader --ok "+("small"===this.size?"size-s":""):void 0}},methods:{send:function(){}}},a=r,s=o("2877"),c=Object(s["a"])(a,n,i,!1,null,null,null);e["a"]=c.exports},"5ada":function(t,e,o){},6239:function(t,e,o){"use strict";o("7f7f");var n=o("7618"),i=o("75fc"),r=(o("7514"),o("bc3a")),a=o.n(r),s=(o("b643"),o("2b27"),o("2b0e")),c=o("4328"),u=o.n(c),l={items:[],current:{},isLoaded:!1,sendForm:!1,statistic:{},itemDetail:{}},d={getByXmlId:function(t){return function(e){return Object(i["a"])(t.items).find((function(t){return t.xmlId===e}))}},getCurrent:function(t){return function(e){return t.current}}},m={getCurrent:function(t){return new Promise((function(e,o){t.commit("setLoaded",!1),"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")?a.a.get("https://api.zemskidki.ru/public/v1/partner/current/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0}).then((function(o){"object"===Object(n["a"])(o.data)&&0===+o.data.error?(t.commit("setCurrent",o.data.result),o.data.result.item&&o.data.result.item.id&&t.dispatch("setProviderData",o)):401===+o.data.error&&t.dispatch("auth/logout",{},{root:!0}),t.commit("setLoaded",!0),e()})).catch((function(t){o()})):(t.dispatch("auth/logout",{},{root:!0}),t.commit("setLoaded",!0),e())}))},getStatistic:function(t){return new Promise((function(e,o){t.commit("setLoaded",!1),"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")?a.a.get("https://api.zemskidki.ru/public/v1/partner/statistics/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0}).then((function(o){"object"===Object(n["a"])(o.data)&&0===+o.data.error?t.commit("setProviderStatistic",o.data.result):401===+o.data.error&&t.dispatch("auth/logout",{},{root:!0}),t.commit("setLoaded",!0),e()})).catch((function(t){o()})):(t.dispatch("auth/logout",{},{root:!0}),t.commit("setLoaded",!0),e())}))},getByActionID:function(t,e){return new Promise((function(o,i){"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")?a.a.get("https://api.zemskidki.ru/public/v1/moderator/partnerbyaction/"+e.action+"/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0}).then((function(e){t.commit("setLoaded",!0),"object"===Object(n["a"])(e.data)&&0===+e.data.error?(t.dispatch("setProviderData",e),o()):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){i()})):(t.dispatch("auth/logout",{},{root:!0}),t.commit("setLoaded",!0),o())}))},getByID:function(t,e){return new Promise((function(o,i){"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")?("false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token"),a.a.get("https://api.zemskidki.ru/public/v1/moderator/providers/"+e.id+"/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0,params:{type:"getEditData"},paramsSerializer:function(t){return u.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(e){t.commit("setLoaded",!0),"object"===Object(n["a"])(e.data)&&0===+e.data.error?(t.dispatch("setProviderData",e),o()):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){i()}))):(t.dispatch("auth/logout",{},{root:!0}),t.commit("setLoaded",!0),o())}))},setProviderData:function(t,e){t.commit("setCurrent",e.data.result)},initDetail:function(t,e){return new Promise((function(o,n){l.isLoad?o():(t.commit("setLoaded",!0),a.a.get("https://api.zemskidki.ru/public/v1/public/supplier/"+e.id,{withCredentials:!0,params:{},paramsSerializer:function(t){return u.a.stringify(t,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(e){t.commit("setSupplier",e.data.result),t.commit("setLoaded",!1),o()})).catch((function(e){t.commit("setLoaded",!1),o()})))}))}},p={setCurrent:function(t,e){"object"===Object(n["a"])(e)&&void 0!==e.item&&s["a"].set(t,"current",e.item)},setProviderStatistic:function(t,e){"object"===Object(n["a"])(e)&&void 0!==e.statistic&&s["a"].set(t,"statistic",e.statistic)},setCurrentField:function(t,e){"object"===Object(n["a"])(e)&&void 0!==e.name&&s["a"].set(t.current,e.name,e.value)},setLoaded:function(t,e){s["a"].set(t,"isLoaded",e)},setSend:function(t,e){s["a"].set(t,"sendForm",e)},partnerClear:function(t,e){t.current={}},setSupplier:function(t,e){s["a"].set(t,"itemDetail",e)}};e["a"]={namespaced:!0,state:l,getters:d,actions:m,mutations:p}},6274:function(t,e,o){"use strict";o("8e6e"),o("ac6a"),o("456d");var n=o("bd86");o("a481");function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){Object(n["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var a={items:{digits:{mask:"9",repeat:999,greedy:!1,placeholder:"",rightAlign:!1,showMaskOnHover:!1},price:{alias:"integer",placeholder:"",suffix:" ₽",autoGroup:!0,groupSeparator:" ",max:9999999,allowMinus:!1,groupSize:3,autoUnmask:!0,rightAlign:!1,showMaskOnHover:!1},percent:{mask:"9{1,2}%",autoUnmask:!0,placeholder:"",rightAlign:!1,showMaskOnFocus:!0,showMaskOnHover:!1},phone:{mask:"+7(999)999-99-99",showMaskOnHover:!1}}},s={price:function(t,e,o,n){var i=r({},t.items.price);return i.suffix=" "+n["options/setRouble"],i}},c={},u={};e["a"]={namespaced:!0,state:a,getters:s,actions:c,mutations:u}},"69db":function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return i}));o("a481");function n(t,e){var o=[2,0,1,1,1,2];return e[t%100>4&&t%100<20?2:o[t%10<5?t%10:5]]}function i(t,e,o,n){var i,r,a,s,c;return isNaN(e=Math.abs(e))&&(e=2),void 0==o&&(o=","),void 0==n&&(n="."),i=parseInt(t=(+t||0).toFixed(e))+"",(r=i.length)>3?r%=3:r=0,c=r?i.substr(0,r)+n:"",a=i.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n),s=e?o+Math.abs(t-i).toFixed(e).replace(/-/,0).slice(2):"",c+a+s}},"6a1e":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("textarea-field",{attrs:{placeholder:"Опишите суть вопроса","auto-focus":!0,"is-error":t.message_error,"add-style":{height:"200px"}},on:{focus:function(e){return t.removeError()}},model:{value:t.messageText,callback:function(e){t.messageText=e},expression:"messageText"}})],1),o("div",{staticClass:"row-b mt32 button-block"},[o("button",{staticClass:"btn",on:{click:function(e){return t.sendMess()}}},[t._v("Отправить")])])])},i=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("bd86")),a=(o("7f7f"),o("2f62")),s=o("7f09");function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var l={name:"MailZems",components:{TextareaField:s["a"]},props:{defaultText:{default:function(){return""}}},data:function(){return{messageText:"",message_error:!1,send_message_success:!0}},created:function(){},mounted:function(){this.messageText=this.defaultText},methods:{sendMess:function(){var t=this;t.message_error=!1,""===t.messageText?setTimeout((function(){t.message_error=!0}),300):(t.message_error=!1,this.$store.dispatch("mail/sendMessage",{message:t.messageText}),t.newMessModalOpen())},newMessModalOpen:function(){this.send_message_success=!1,this.$store.commit("popups/open",{name:this.popups.mailSent.name}),this.$store.commit("popups/close",{name:this.popups.mailZems.name})},newMessModalClose:function(){this.send_message_success=!1,this.$store.commit("popups/close",{name:this.popups.mailSent.name})},removeError:function(){this.message_error=!1}},computed:u({},Object(a["b"])({popups:function(t){return t.popups.items}}))},d=l,m=o("2877"),p=Object(m["a"])(d,n,i,!1,null,"6454358e",null);e["a"]=p.exports},"6e4e":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"popup-city__field field-clear"},[n("input-styled",{attrs:{name:"citySearch","remove-btn":!0,"current-model":t.citySearch,placeholder:"Поиск по городам","placeholder-input":"Введите название города","is-clear-btn":!0},model:{value:t.citySearch,callback:function(e){t.citySearch=e},expression:"citySearch"}})],1),t.init?n("div",{staticClass:"cities-list"},[t._l(t.citiesSearch,(function(e){return t.isShowAll||0!==+e.count?n("a",{key:e.id,staticClass:"city-item",class:{active:e.id===t.current.id},attrs:{href:"javascript:void(0);"},on:{click:function(o){return t.setCity(e)}}},[n("span",{staticClass:"city-name",style:{"font-weight":"москва"!==e.name.toLowerCase()&&"санкт-петербург"!==e.name.toLowerCase()||e.id===t.current.id?"":"bold"}},[t._v("\n                "+t._s(e.name)+"\n                "),n("svg",{staticClass:"icon-check"},[n("use",{attrs:{"xlink:href":o("973d")+"#check"}})])]),n("span",{staticClass:"count"},[t._v(t._s(e.count))])]):t._e()})),t.citiesSearch.length?t._e():n("div",{staticClass:"not-found"},[n("svg",[n("use",{attrs:{"xlink:href":o("973d")+"#ufo"}})]),t._m(0)])],2):t._e()])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"txt"},[t._v("Если города нет в списке,"),o("br"),t._v("значит мы в нём не работае")])}],r=(o("8e6e"),o("456d"),o("ac4d"),o("8a81"),o("ac6a"),o("7f7f"),o("75fc")),a=o("bd86"),s=o("2f62"),c=o("b10c");function u(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function l(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?u(Object(o),!0).forEach((function(e){Object(a["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var d={name:"CitySelect",components:{InputStyled:c["a"]},props:{isShowAll:{default:function(){return!0}},isSet:{default:function(){return!0}},textNote:{default:function(){return"(Если города нет в списке – значит, там пока нет скидок...)"}},propCurrent:{default:function(){return!1}}},data:function(){return{citySearch:"",init:!1}},computed:l({citiesSearch:function(){var t,e=this;t=this.citySearch.length>0&&this.cities.size>0?Object(r["a"])(this.cities).filter((function(t){return 0===t.name.toLowerCase().indexOf(e.citySearch.toLowerCase())})):Object(r["a"])(this.cities);var o=0,n=!0,i=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var u=s.value;if(+u.id===+this.current.id&&(this.isShowAll||0!==+u.count)){var l=t.indexOf(u);-1!==l&&(t.splice(o,0,t.splice(t.indexOf(u),1)[0]),"москва"!==u.name.toLowerCase()&&(o=1))}}}catch(y){i=!0,a=y}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}var d=!0,m=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var v=f.value;if("москва"===v.name.toLowerCase()||"санкт-петербург"===v.name.toLowerCase()){if("санкт-петербург"===v.name.toLowerCase()&&+v.id!==+this.current.id){var g=t.indexOf(v);-1!==g&&t.splice(o+1,0,t.splice(t.indexOf(v),1)[0])}if("москва"===v.name.toLowerCase()&&+v.id!==+this.current.id){var b=t.indexOf(v);-1!==b&&t.splice(o,0,t.splice(t.indexOf(v),1)[0])}}}}catch(y){m=!0,p=y}finally{try{d||null==h.return||h.return()}finally{if(m)throw p}}return t},current:function(){return this.propCurrent?this.propCurrent:this.currentCityState}},Object(s["b"])({popups:function(t){return t.popups.items},cities:function(t){return t.cities.items},currentCityState:function(t){return t.cities.current}})),mounted:function(){var t=this;setTimeout((function(){t.init=!0}),100)},methods:{setCity:function(t){this.isSet?this.$store.dispatch("cities/setCity",{city:t,closePopup:this.popups.citySelect.name,currentSection:this.$route.params.sid}):this.$emit("set:city",t)}}},m=d,p=o("2877"),f=Object(p["a"])(m,n,i,!1,null,"21e904fa",null);e["a"]=f.exports},"7d86":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:t.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"main-nav-block"},[n("div",{staticClass:"main-nav",class:{slide:t.showTopMenu}},[n("div",{staticClass:"popup-header dark"},[n("div",{staticClass:"popup-name",on:{click:function(e){return t.showPopup("citySelect")}}},[n("svg",{staticClass:"icon-map-track"},[n("use",{attrs:{"xlink:href":o("973d")+"#map-track"}})]),t._v("\n                "+t._s(t.currentCity.name)+"\n                "),n("svg",{staticClass:"edit-icon"},[n("use",{attrs:{"xlink:href":o("973d")+"#pencil"}})])]),n("div",{staticClass:"close",on:{click:t.topMenuClose}},[n("span",{staticClass:"i icon-close"},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":o("973d")+"#close"}})])])])]),n("div",{ref:"topmenu",staticClass:"h-modal-inner"},[n("div",{staticClass:"nav-items"},[t.token?n("router-link",{staticClass:"nav-item",attrs:{to:"/personal"},nativeOn:{click:function(e){return t.topMenuClose(e)}}},[n("div",{staticClass:"left-icon"},[n("svg",{staticClass:"i icon-ticket"},[n("use",{attrs:{"xlink:href":o("973d")+"#ticket"}})])]),n("div",{staticClass:"ni-right"},[n("div",{staticClass:"nav-txt"},[t._v("Мои купоны")]),n("div",{staticClass:"chevron"},[n("span",{staticClass:"i icon-chevron"},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":o("973d")+"#chevron"}})])])])])]):n("a",{staticClass:"nav-item",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.openAuthorization(!0)}}},[n("div",{staticClass:"left-icon"},[n("svg",{staticClass:"i icon-ticket"},[n("use",{attrs:{"xlink:href":o("973d")+"#ticket"}})])]),n("div",{staticClass:"ni-right"},[n("div",{staticClass:"nav-txt"},[t._v("Мои купоны")]),n("div",{staticClass:"chevron"},[n("span",{staticClass:"i icon-chevron"},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":o("973d")+"#chevron"}})])])])])]),t._l(t.menuList,(function(e){return e.hideMobile?t._e():n("router-link",{key:e.link,staticClass:"nav-item ni-about",attrs:{to:e.link},nativeOn:{click:function(e){return t.topMenuClose(e)}}},[n("div",{staticClass:"left-icon"},[n("svg",{staticClass:"icon-info"},["info"===e.iconMobile||"/about/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#info"}}):t._e(),"beaker"===e.iconMobile||"/rating/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#beaker"}}):t._e(),"stats"===e.iconMobile||"/statistic/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#stats"}}):t._e(),"coop"===e.iconMobile||"/cooperation/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#coop"}}):t._e(),"faq"===e.iconMobile||"/faq/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#faq"}}):t._e(),"/deposit/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#deposit"}}):t._e(),"contact-info"===e.iconMobile||"/contacts/"===e.link?n("use",{attrs:{"xlink:href":o("973d")+"#contact-info"}}):t._e()])]),n("div",{staticClass:"ni-right"},[n("div",{staticClass:"nav-txt"},[t._v(t._s(e.name))]),n("div",{staticClass:"chevron"},[n("span",{staticClass:"i icon-chevron"},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":o("973d")+"#chevron"}})])])])])])}))],2),n("a",{staticClass:"link mt40",attrs:{href:"https://zemskidki.ru/?full_version"}},[t._v("Версия для ПК")]),n("a",{staticClass:"link",attrs:{href:"javascript:void(0);"},on:{click:t.openPublicOffer}},[t._v("Публичная оферта")]),n("div",{staticClass:"nav-copyright"},[t._v("© 1980-2092 Алексей Земсков")])])])])},i=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("7f7f"),o("bd86")),a=o("2f62");function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var u={name:"TopMenu",props:{type:{default:function(){return"public"}}},created:function(){var t=this;"public"!==this.type&&this.$store.dispatch("menus/getMenu",{type:this.type}).then((function(e){t.$store.commit("menus/setMenu",e)}))},data:function(){return{menuItems:[{name:"О проекте",link:"/about/"},{name:"Стоимость",link:"/deposit/"},{name:"Статистика",link:"/statistic/"},{name:"Сотрудничество",link:"/cooperation/"},{name:"Вопросы и ответы",link:"/faq/"},{name:"Контактная информация",link:"/contacts/"}]}},computed:c({},Object(a["b"])({user:function(t){return t.users.user},showTopMenu:function(t){return t.menus.showTopMenu},popups:function(t){return t.popups.items},currentCity:function(t){return t.cities.current}}),{menuList:function(){return"public"===this.type?this.menuItems:this.$store.state.menus.itemsTop},token:function(){return"false"!==this.localStorage.token&&null!==this.localStorage.token&&void 0!==this.localStorage.token&&this.localStorage.token}}),methods:{openPublicOffer:function(){this.$store.commit("popups/open",{name:this.popups.publicOffer.name})},swipeHandler:function(t){"right"==t&&this.$store.commit("menus/topMenuClose")},topMenuOpen:function(){this.$store.commit("menus/topMenuOpen")},topMenuClose:function(){this.$store.commit("menus/topMenuClose"),this.$refs.topmenu.scrollTop=0},openAuthorization:function(t){this.$store.commit("menus/topMenuClose"),this.$store.commit("auth/setIsRedirect",t),this.$store.commit("popups/open",{name:this.popups.publicAuth.name})},showPopup:function(t){this.$store.commit("menus/topMenuClose"),this.$store.commit("popups/open",{name:t})}}},l=u,d=o("2877"),m=Object(d["a"])(l,n,i,!1,null,"2bacc67d",null);e["a"]=m.exports},"7f09":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"textarea-field",class:{"--has-counter":t.hasCounterSMS,error:t.isError}},[n("textarea-autosize",{ref:"textField",class:t.classTextareaField,style:t.addStyle,attrs:{id:t.inputId,"auto-focus":t.autoFocus,disabled:t.disabled,placeholder:t.placeholder},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter()},input:t.updateValue},nativeOn:{focus:function(e){return t.setFocus(!0)},blur:function(e){return t.setFocus(!1)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),t.isError&&t.errorText?n("div",{staticClass:"textarea-error"},[t._v(t._s(t.errorText))]):t._e(),n("div",{staticClass:"textarea-field-error"},[n("svg",{staticClass:"--error"},[n("use",{attrs:{"xlink:href":o("973d")+"#error"}})])]),t.hasCounterSMS?n("div",{staticClass:"textarea-counter"},[t._v(" символов: "),n("span",[t._v(t._s(t.counterSimbols))]),t._v(" из "+t._s(t.counterSmsLength)+"  |  кол-во СМС: "),n("span",{staticClass:"js-sms-count",attrs:{"data-target":"#sms-area1"}},[t._v(t._s(t.counterSMS))])]):t._e()],1)},i=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("4917"),o("bd86")),a=(o("6b54"),o("f2c8"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"textField",style:t.computedStyles,attrs:{maxlength:"3000"},domProps:{value:t.val},on:{focus:t.resize,input:function(e){e.target.composing||(t.val=e.target.value)}}})}),s=[],c=(o("6762"),o("2fdb"),o("c5f6"),{name:"TextareaAutosize",props:{autoFocus:{default:!1},value:{type:[String,Number],default:""},autosize:{type:Boolean,default:!0},minHeight:{type:[Number],default:null},maxHeight:{type:[Number],default:null},important:{type:[Boolean,Array],default:!1}},data:function(){return{val:null,maxHeightScroll:!1,height:"auto"}},computed:{computedStyles:function(){return this.autosize?{resize:this.isResizeImportant?"none !important":"none",height:this.height,overflow:this.maxHeightScroll?"auto":this.isOverflowImportant?"hidden !important":"hidden"}:{}},isResizeImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("resize")},isOverflowImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("overflow")},isHeightImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("height")}},watch:{value:function(t){this.val=t},val:function(t){this.$nextTick(this.resize),this.$emit("input",t)},minHeight:function(){this.$nextTick(this.resize)},maxHeight:function(){this.$nextTick(this.resize)},autosize:function(t){t&&this.resize()}},methods:{resize:function(){var t=this,e=this.isHeightImportant?"important":"";return this.height="auto".concat(e?" !important":""),this.$nextTick((function(){var o=t.$el.scrollHeight+1;t.minHeight&&(o=o<t.minHeight?t.minHeight:o),t.maxHeight&&(o>t.maxHeight?(o=t.maxHeight,t.maxHeightScroll=!0):t.maxHeightScroll=!1),o+=40;var n=o+"px";t.height="".concat(n).concat(e?" !important":"")})),this},inputFocus:function(t){var e=this;this.$refs[t]&&this.$nextTick((function(){setTimeout((function(){e.$refs[t].focus()}),200)}))}},created:function(){this.val=this.value},mounted:function(){this.resize(),!0===this.autoFocus&&this.inputFocus("textField")}}),u=c,l=o("2877"),d=Object(l["a"])(u,a,s,!1,null,null,null),m=d.exports;function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var h={components:{TextareaAutosize:m},name:"TextareaField",props:{value:{default:""},placeholder:{default:""},inputId:{default:""},disabled:{default:!1},isError:{default:!1},isEdit:{default:!1},addStyle:{default:""},autoFocus:{default:!1},isValidate:{default:!1},errorText:{default:"Не менее 10-ти символов"},classTextarea:{default:function(){return[]},type:Array},hasCounterSMS:{default:!1}},data:function(){return{focus:!1,counterSMS:0,counterSimbols:0,counterSmsLength:70}},watch:{isError:function(t,e){if(this.isError&&this.$el.closest(".popup-wrapper")){var o=0,n=this.$el.closest(".popup-wrapper");o+=parseFloat(n.offsetTop),n.scrollTo({top:o,left:0,behavior:"smooth"})}}},computed:{showLabel:function(){return this.focus||this.inputVal.toString().length>0},classTextareaField:function(){return f({error:this.isError},this.classTextarea)},inputVal:{get:function(){return this.value},set:function(t){this.input=t}}},mounted:function(){},methods:{updateValue:function(t){this.$emit("input",t),this.hasCounterSMS&&this.symbolsCounter(t)},enter:function(){this.$emit("enter")},check:function(){this.$emit("check")},setFocus:function(t){t=t||!1,this.focus=t,t?this.$emit("focus"):this.$emit("blur")},edit:function(){this.$emit("edit")},symbolsCounter:function(t){var e,o;if(null==t.match(/\r/g))t.match(/\n/g);var n=null!=e?e.length:0,i=t.length+n,r=i>70?67:70,a=Math.ceil(i/r);o=i%r?i%r:0==i?0:r,this.counterSMS=a,this.counterSmsLength=r,this.counterSimbols=o}}},v=h,g=Object(l["a"])(v,n,i,!1,null,null,null);e["a"]=g.exports},8472:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-block",class:[{open:t.show},t.addClass]},[o("div",{staticClass:"black-bg",on:{click:t.close}}),o("div",{staticClass:"modal",attrs:{show:t.show}},[o("div",{staticClass:"modal-info"},[""==t.modalType?o("div",[t.title?o("div",{class:{"modal-ttl":!0,red:t.redtitle,green:t.greentitle}},[t._v(t._s(t.title))]):t._e(),t.text?o("div",{class:{"modal-txt":!0,red:t.redtxt,green:t.greentxt}},[o("p",[t._v(t._s(t.text))])]):t._e(),t._t("default")],2):t._e(),"notOrder"==t.modalType?o("div",{staticClass:"long-margin"},[t._m(0),o("div",{staticClass:"modal-txt"},[t._m(1),o("p",[t._v("P.S. При этом вы всегда можете"),o("br"),o("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showPopup("mailZems"),t.close()}}},[t._v("пожаловаться")]),t._v(" на купон"),o("br"),t._v("руководителю проекта. ")])])]):t._e(),"isSend"==t.modalType?o("div",{staticClass:"long-margin"},[t._m(2),o("div",{staticClass:"modal-txt"},[t._m(3),o("p",[t._v("P.S. При этом вы всегда можете"),o("br"),o("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showPopup("mailZems"),t.close()}}},[t._v("пожаловаться")]),t._v(" на купон"),o("br"),t._v("руководителю проекта. ")])])]):t._e()]),o("div",{staticClass:"modal-butt"},["cooperationAccepted"==t.name?o("div",{staticClass:"ok-butt",on:{click:t.closeCooperationAccepted}},[t._v(t._s(t.btntext))]):o("div",{staticClass:"ok-butt",on:{click:t.close}},[t._v(t._s(t.btntext))])])])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-ttl red"},[t._v(" Вы не можете написать отзыв на"),o("br"),t._v("купон, которым не пользовались")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[t._v("У нас допускаются только честные"),o("br"),t._v("отзывы, которые может оставить"),o("br"),t._v("только владелец купона и только"),o("br"),t._v("после его использования")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-ttl red"},[t._v("Вы не можете написать отзыв"),o("br"),t._v("на этот купон, потому что вы"),o("br"),t._v("его уже написали")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[t._v("Написать отзыв на купон можно"),o("br"),t._v("только один раз и редактировать"),o("br"),t._v("его после уже нельзя.")])}],r=(o("8e6e"),o("ac6a"),o("456d"),o("7f7f"),o("bd86")),a=o("2f62"),s=o("69db");function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var l={name:"PopupInfoBlock",props:{width:{default:function(){return 320}},addClass:{default:""},show:{default:function(){return!1}},isSetTop:{default:function(){return!1}},isBtnClose:{default:function(){return!0}},isSetStyled:{default:function(){return!1}},isSetBlank:{default:function(){return!1}},isResize:{default:function(){return!1}},name:"",title:{default:""},text:{default:""},modalType:{default:""},btntext:{default:"Понятно"},redtitle:{default:function(){return!1}},redtxt:{default:function(){return!1}},greentitle:{default:function(){return!1}},greentxt:{default:function(){return!1}},average:{default:function(){return""}},discount:{default:function(){return""}},projectDiscount:{default:function(){return""}}},watch:{show:function(){this.show&&(this.isSetTop&&this.updateViewportSize(),document.getElementsByTagName("body")[0].classList.add("nonscroll"))},isResize:function(t,e){this.isSetTop&&t!==e&&this.updateViewportSize()}},data:function(){return{top:20}},computed:u({},Object(a["b"])({user:function(t){return t.users.user},options:function(t){return t.options.items},formAuthFields:function(t){return t.auth.forms.auth.fields}}),{discountSumRetail:function(){var t=this.average*this.discount/100;return Object(s["b"])(t>0?t:0,0,""," ")},discountSumUser:function(){var t=this.average*(this.projectDiscount-this.discount-this.options.ourDiscount)/100;return Object(s["b"])(t>0?t:0,0,""," ")},discountSum:function(){var t=this.average*(this.projectDiscount-this.options.ourDiscount)/100;return Object(s["b"])(t>0?t:0,0,""," ")}}),mounted:function(){this.isSetTop&&this.topListener()},methods:{number_format:function(t){return Object(s["b"])(t,0,""," ")},updateViewportSize:function(){this.$nextTick((function(){if("undefined"!==typeof this.$refs.overlayPopup){var t=this.getViewportSize().h-this.$refs.overlayPopup.clientHeight;t<1&&(t=1),this.top=t/2}}))},showPopup:function(t){this.$store.commit("popups/open",{name:t})},updatePopupStyled:function(){this.$nextTick((function(){this.$refs.overlayPopup.classList.add("popup--styled")}))},topListener:function(){var t=this;this.$nextTick((function(){t.updateViewportSize(),window.addEventListener("resize",t.updateViewportSize)}))},getViewportSize:function(){var t=window.document.querySelector("html");return{w:t.clientWidth,h:t.clientHeight}},close:function(){this.show&&this.name?(this.$store.commit("popups/close",{name:this.name}),this.$emit("close"),document.getElementsByTagName("body")[0].classList.remove("nonscroll")):(this.$emit("close"),document.getElementsByTagName("body")[0].classList.remove("nonscroll")),this.$store.commit("auth/setFormAuthError",{name:this.formAuthFields.login.name,value:!1})},closeCooperationAccepted:function(){this.show&&this.name?(this.$store.commit("popups/close",{name:this.name}),this.$emit("close"),this.$router.push("/"),document.getElementsByTagName("body")[0].classList.remove("nonscroll")):(this.$emit("close"),this.$router.push("/"),document.getElementsByTagName("body")[0].classList.remove("nonscroll"))}}},d=l,m=(o("45e9"),o("2877")),p=Object(m["a"])(d,n,i,!1,null,"cb4135fe",null);e["a"]=p.exports},"8bc5":function(t,e,o){"use strict";o("7f7f");var n=o("7618"),i=o("bc3a"),r=o.n(i),a=(o("b643"),o("4328"),{isSend:!1}),s={},c={sendForm:function(t,e){return new Promise((function(o,i){if(!a.isSend){t.commit("setSend",!0);var s=new FormData;for(var c in e.params)s.append(c,e.params[c]);"cooperation"===e.params.formName&&s.append("isMobileSite",!0),r.a.post("https://api.zemskidki.ru/public/v1/public/forms/",s,{withCredentials:!0,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(i){t.commit("setSend",!1),"object"===Object(n["a"])(i.data)&&0===+i.data.error?"cooperation"===e.params.formName&&"ok"===i.data.result.status&&t.commit("popups/open",{name:t.rootState.popups.items.cooperationAccepted.name},{root:!0}):"cooperation"===e.params.formName&&401===+i.data.error?t.commit("popups/open",{name:t.rootState.popups.items.cooperationErrorPhone.name},{root:!0}):401===+i.data.error&&t.dispatch("auth/logout",{},{root:!0}),o()})).catch((function(e){t.commit("setSend",!1),o()}))}}))}},u={setSend:function(t,e){t.isSend=e}};e["a"]={namespaced:!0,state:a,getters:s,actions:c,mutations:u}},"8fc1":function(t,e,o){"use strict";var n=o("7618"),i=(o("7f7f"),o("bc3a")),r=o.n(i),a=(o("b643"),o("4328")),s=o.n(a),c={itemsTop:[],itemsAction:[],showTopMenu:!1},u={ActionPageCouponUrl:function(t){return function(e){var o;for(var n in t.itemsAction["coupons"])if(t.itemsAction["coupons"][n].id==e.action){o=n;break}return"/moderator/coupons/"+t.itemsAction["coupons"][o].id+"/"}},ActionPageCouponTitle:function(t){return function(e){var o,n="";for(var i in t.itemsAction["coupons"])if(t.itemsAction["coupons"][i].id==e.action){o=i;break}return"undefined"!==typeof t.itemsAction["coupons"]&&(n=t.itemsAction["coupons"][o]["name"]),""!=n&&(e.defaultStatus&&e.action==e.defaultStatus?n="Акции "+n.toLowerCase():n+=" акции"),n}},RepaymentPage:function(t){return function(e){for(var o in t.itemsAction["repayment"])if(t.itemsAction["repayment"][o].id==e.currentStatus)return t.itemsAction["repayment"][o]}}},l={getMenu:function(t,e){return new Promise((function(o,i){r.a.get("https://api.zemskidki.ru/public/v1/"+e.type+"/menus/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},params:{type:"top"},paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})},withCredentials:!0}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error||401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0}),o(e.data.result)})).catch((function(t){o()}))}))},getActionMenu:function(t,e){return new Promise((function(o,i){r.a.get("https://api.zemskidki.ru/public/v1/"+e.type+"/menus/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},params:{type:"action"},paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})},withCredentials:!0}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error?(t.commit("setActionMenu",e.data.result),o()):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){i()}))}))}},d={setMenu:function(t,e){"object"===Object(n["a"])(e)&&void 0!==e.top&&(t.itemsTop=e.top)},setActionMenu:function(t,e){"object"===Object(n["a"])(e)&&void 0!==e.items&&(t.itemsAction=e.items)},topMenuOpen:function(t,e){t.showTopMenu=!0;var o=window.pageYOffset||document.documentElement.scrollTop;document.body.setAttribute("data-body-scroll-fix",o),document.body.style.top="-"+o+"px",document.getElementsByTagName("body")[0].classList.add("nonscroll-top-menu")},topMenuClose:function(t,e){t.showTopMenu=!1;var o=document.body.getAttribute("data-body-scroll-fix");document.body.style.top="",document.getElementsByTagName("body")[0].classList.remove("nonscroll-top-menu"),window.scroll(0,o)}};e["a"]={namespaced:!0,state:c,getters:u,actions:l,mutations:d}},"939d":function(t,e,o){"use strict";o("7f7f"),o("bc3a"),o("b643");var n={items:{citySelect:{name:"citySelect",show:!1},address:{name:"address",show:!1},categoryChoice:{name:"categoryChoice",show:!1},categoriesCreateConfirm:{name:"categoriesCreateConfirm",show:!1},categoriesMoveConfirm:{name:"categoriesMoveConfirm",show:!1},categoriesHideConfirm:{name:"categoriesHideConfirm",show:!1},printContract:{name:"printContract",show:!1},citySelectReturn:{name:"citySelectReturn",show:!1},mailZems:{name:"mailZems",show:!1},publicAuth:{name:"publicAuth",show:!1},authorization:{name:"authorization",show:!1},newQuest:{name:"newQuest",show:!1},manyAuth:{name:"manyAuth",show:!1},userBanned:{name:"userBanned",show:!1},couponCancel:{name:"couponCancel",show:!1},couponClaim:{name:"couponClaim",show:!1},repeatSendInfo:{name:"repeatSendInfo",show:!1},checkoutFail:{name:"checkoutFail",show:!1},couponHistory:{name:"couponHistory",show:!1},opinionAdd:{name:"opinionAdd",show:!1},couponBuy:{name:"couponBuy",show:!1},couponBuyOk:{name:"couponBuyOk",show:!1},couponBuyError:{name:"couponBuyError",show:!1},couponBuyErrorAuth:{name:"couponBuyErrorAuth",show:!1},couponAlreadyIssued:{name:"couponAlreadyIssued",show:!1},cooperationAccepted:{name:"cooperationAccepted",show:!1},cooperationErrorPhone:{name:"cooperationErrorPhone",show:!1},cooperationCancelSmallPriceOne:{name:"cooperationCancelSmallPriceOne",show:!1},cooperationCancelSmallPrice:{name:"cooperationCancelSmallPrice",show:!1},cooperationCancelSmallPercent:{name:"cooperationCancelSmallPercent",show:!1},cooperationCancelVerySmallPrice:{name:"cooperationCancelVerySmallPrice",show:!1},partnerCouponsRemove:{name:"partnerCouponsRemove",show:!1},partnerCouponsEdit:{name:"partnerCouponsEdit",show:!1},partnerCouponsEditStopped:{name:"partnerCouponsEditStopped",show:!1},partnerCouponsStop:{name:"partnerCouponsStop",show:!1},partnerCouponsStat:{name:"partnerCouponsStat",show:!1},partnerModerateErrorField:{name:"partnerModerateErrorField",show:!1},partnerModerateErrorPercent:{name:"partnerModerateErrorPercent",show:!1},partnerModerateErrorSum:{name:"partnerModerateErrorSum",show:!1},partnerModerateErrorProfit:{name:"partnerModerateErrorProfit",show:!1},partnerModerateErrorProvider:{name:"partnerModerateErrorProvider",show:!1},invoiceWaitPay:{name:"invoiceWaitPay",show:!1},invoiceWaitDocs:{name:"invoiceWaitDocs",show:!1},invoicePaid:{name:"invoicePaid",show:!1},partnerEditAboutWelcome:{name:"partnerEditAboutWelcome",show:!1},cooperationEditCancel:{name:"cooperationEditCancel",show:!1},cooperationEditAccept:{name:"cooperationEditAccept",show:!1},partnerBill:{name:"partnerBill",show:!1},requestApprove:{name:"requestApprove",show:!1},requestReject:{name:"requestReject",show:!1},requestPause:{name:"requestPause",show:!1},sendMessagePartner:{name:"sendMessagePartner",show:!1},partnerFirstEntry:{name:"partnerFirstEntry",show:!1},providerReject:{name:"providerReject",show:!1},providerOvertime:{name:"providerOvertime",show:!1},sendMessagePartnerBuh:{name:"sendMessagePartnerBuh",show:!1},providerApprove:{name:"providerApprove",show:!1},providerPrint:{name:"providerPrint",show:!1},providerCheckSend:{name:"providerCheckSend",show:!1},providerFinalApprove:{name:"providerFinalApprove",show:!1},providerBlock:{name:"providerBlock",show:!1},providerCancelReject:{name:"providerCancelReject",show:!1},providerCancelBlock:{name:"providerCancelBlock",show:!1},providerApproveAbout:{name:"providerApproveAbout",show:!1},verificationInn:{name:"verificationInn",show:!1},verificationOgrn:{name:"verificationOgrn",show:!1},verificationOgrnIp:{name:"verificationOgrnIp",show:!1},originDiscount:{name:"originDiscount",show:!1},confirmDiscount:{name:"confirmDiscount",show:!1},correctText:{name:"correctText",show:!1},correctTextNoDiscount:{name:"correctTextNoDiscount",show:!1},moderatorCouponApprove:{name:"moderatorCouponApprove",show:!1},moderatorCouponReject:{name:"moderatorCouponReject",show:!1},sendAllProviders:{name:"sendAllProviders",show:!1},moderatorCouponBlock:{name:"moderatorCouponBlock",show:!1},moderatorCouponUnBlock:{name:"moderatorCouponUnBlock",show:!1},constructActionCallUs:{name:"constructActionCallUs",show:!1},constructActionComeUs:{name:"constructActionComeUs",show:!1},contractEdit:{name:"contractEdit",show:!1},constructActionAllCity:{name:"constructActionAllCity",show:!1},constructActionCity:{name:"constructActionCity",show:!1},moderatorCouponAlert:{name:"moderatorCouponAlert",show:!1},selectCity:{name:"selectCity",show:!1},constructActionVideo:{name:"constructActionVideo",show:!1},welcomePartner:{name:"welcomePartner",show:!1},constructPartnerFinal:{name:"constructPartnerFinal",show:!1},couponExtend:{name:"couponExtend",show:!1},couponAnnul:{name:"couponAnnul",show:!1},couponCheating:{name:"couponCheating",show:!1},couponCheck:{name:"couponCheck",show:!1},repaymentAnnul:{name:"repaymentAnnul",show:!1},repaymentRepay:{name:"repaymentRepay",show:!1},auditorBill:{name:"auditorBill",show:!1},buhPartnerBill:{name:"buhPartnerBill",show:!1},kickPartner:{name:"kickPartner",show:!1},buhAddBill:{name:"buhAddBill",show:!1},billSendOk:{name:"billSendOk",show:!1},billWaitPay:{name:"billWaitPay",show:!1},billPaid:{name:"billPaid",show:!1},billWaitDocs:{name:"billWaitDocs",show:!1},auditorProviderCancelBlock:{name:"auditorProviderCancelBlock",show:!1},auditorProviderBlock:{name:"auditorProviderBlock",show:!1},presentationVideo:{name:"presentationVideo",show:!1},constructVideoAdd:{name:"constructVideoAdd",show:!1},cooperationWhat:{name:"cooperationWhat",show:!1},cooperationHow:{name:"cooperationHow",show:!1},cooperationTerms:{name:"cooperationTerms",show:!1},sendMessageBuyer:{name:"sendMessageBuyer",show:!1},notifyPageReset:{name:"notifyPageReset",show:!1},constructHowUseVars:{name:"constructHowUseVars",show:!1},constructActionGoLink:{name:"constructActionGoLink",show:!1},userProviderEdit:{name:"userProviderEdit",show:!1},userProviderAdd:{name:"userProviderAdd",show:!1},howCalculated:{name:"howCalculated",show:!1},incorrectCode:{name:"incorrectCode",show:!1},errorNotOrder:{name:"errorNotOrder",show:!1},errorIsSend:{name:"errorIsSend",show:!1},phoneNumberHint:{name:"phoneNumberHint",show:!1},unavailableLink:{name:"unavailableLink",show:!1},opinionAddOk:{name:"opinionAddOk",show:!1},opinionErrorSend:{name:"opinionErrorSend",show:!1},availableCities:{name:"availableCities",show:!1},couponBanned:{name:"couponBanned",show:!1},providerBanned:{name:"providerBanned",show:!1},couponArchived:{name:"couponArchived",show:!1},couponNotAvailable:{name:"couponNotAvailable",show:!1},supplierInfo:{name:"supplierInfo",show:!1},averageCheck:{name:"averageCheck",show:!1},pushNotify:{name:"pushNotify",show:!1},mailSent:{name:"mailSent",show:!1},cooperationRequest:{name:"cooperationRequest",show:!1},cooperationPersonalData:{name:"cooperationPersonalData",show:!1},userInfo:{name:"userInfo",show:!1},askQuestion:{name:"askQuestion",show:!1},publicOffer:{name:"publicOffer",show:!1},purchaseAmount:{name:"purchaseAmount",show:!1}}},i={},r={},a={close:function(t,e){e.name&&t.items.hasOwnProperty(e.name)&&(t.items[e.name].show=!1,document.getElementsByTagName("body")[0].classList.remove("nonscroll"),setTimeout((function(){var t=document.getElementById("block-header");t.classList.remove("out"),t.classList.remove("h-fixed")}),100))},open:function(t,e){e.name&&t.items.hasOwnProperty(e.name)&&(t.items[e.name].show=!0)}};e["a"]={namespaced:!0,state:n,getters:i,actions:r,mutations:a}},9668:function(t,e,o){"use strict";var n=o("7618"),i=o("bc3a"),r=o.n(i),a=o("b643"),s=(o("4328"),{items:{},titleTemplate:"%s | ZemSkidki.ru"}),c={setRouble:function(){var t=d()?"Р":"₽",e=t;return e}},u={getList:function(t,e){return new Promise((function(e,o){r.a.get("https://api.zemskidki.ru/public/v1/public/options/",{headers:a["a"]}).then((function(o){"object"===Object(n["a"])(o.data)&&0===+o.data.error&&t.commit("setOption",o.data.result),e()})).catch((function(t){o()}))}))}},l={setOption:function(t,e){"object"===Object(n["a"])(e)&&(t.items=e.items)}};function d(){var t=window.navigator.userAgent,e=-1!=t.indexOf("iPhone OS")||-1!=t.indexOf("Windows NT 6.1");return e}e["a"]={namespaced:!0,state:s,getters:c,actions:u,mutations:l}},"973d":function(t,e,o){t.exports=o.p+"img/mob-sprite.85cdbbc7.svg"},a670:function(t,e,o){"use strict";var n=o("23d1"),i=o.n(n),r={install:function(t,e){t.directive("mask",{bind:function(t,e){i()(e.value).mask(t)}})}};e["a"]=r},aa13:function(t,e,o){"use strict";var n=o("5ada"),i=o.n(n);i.a},b10c:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inp-s-wrap full",class:{"--icon":t.isEdit||t.isValidate||t.isClearBtn,active:t.showLabel,"inp-s-disabled":t.disabled,error:t.isError}},[n("span",{staticClass:"inp-s-label",class:{error:t.isError}},[t._v(t._s(t.placeholder))]),n("input",{directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"}],ref:"field",staticClass:"inp-s",class:[{error:t.isError,disabled:t.disabled,ok:t.isValidate},t.classBtn],attrs:{type:t.type,id:t.inputId,placeholder:t.showPlaceholder?t.placeholderInput:"",disabled:t.disabled,name:t.nameInput,maxlength:t.maxLengthNum,autocomplete:t.fieldAutocomplete,pattern:t.pattern?"pattern":".*"},domProps:{value:t.value},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter(e)},function(e){return(e.type.indexOf("key")||90===e.keyCode)&&e.ctrlKey?t.clearName(e):null}],focus:function(e){return t.setFocus(!0)},blur:function(e){return t.setFocus(!1)},input:function(e){return t.updateValue(e.target.value)}}}),n("span",{staticClass:"inp-s-icon"},[t.isEdit?n("svg",{staticClass:"--edit",on:{click:t.edit}},[n("use",{attrs:{"xlink:href":o("973d")+"#edit"}})]):t._e(),t.isError?n("svg",{staticClass:"--error"},[n("use",{attrs:{"xlink:href":o("973d")+"#error"}})]):t._e(),t.isValidate?n("svg",{staticClass:"--ok",on:{click:t.check}},[n("use",{attrs:{"xlink:href":o("973d")+"#check"}})]):t._e()]),t.isError?n("span",{staticClass:"inp-s-error-text"},[t._v(t._s(t.errorText))]):t._e(),t.isClearBtn&&t.currentModel.length>0?n("span",{staticClass:"field-clear__btn",on:{click:t.clear}},[n("svg",{staticClass:"icon-c-remove"},[n("use",{attrs:{"xlink:href":o("973d")+"#c-remove"}})])]):t._e(),n("svg",{staticClass:"icon-h-search"},[n("use",{attrs:{"xlink:href":o("973d")+"#h-search"}})]),t.maxLength?n("span",{staticClass:"inp-s-counter"},[t._v(t._s(t.maxLengthNum-t.value.length))]):t._e()])},i=[],r=(o("a481"),o("6b54"),o("7f7f"),o("69db")),a={name:"InputStyled",props:{value:{default:""},placeholder:{default:""},placeholderInput:{default:""},pattern:{default:!1},inputId:{default:""},disabled:{default:!1},classBtn:{default:""},isError:{default:!1},isEdit:{default:!1},isBlockArrowPhone:{default:!1},isMoney:{default:!1},maxMoney:{default:9999999},isValidate:{default:!1},errorText:{default:""},currentModel:{default:""},mask:{default:""},name:{default:"name"},isClearBtn:{default:!1},maxLength:{default:!1},maxLengthNum:{default:""},fieldAutocomplete:{default:"nope"},type:{default:"text"}},data:function(){return{focus:!1,showPlaceholder:!1,nameInput:""}},mounted:function(){"name"!==this.name?this.nameInput=this.name:this.nameInput=Math.random().toString(36).substr(2,5),this.isBlockArrowPhone&&this.$refs.field.addEventListener("keydown",this.blockArrow,!1)},beforeDestroy:function(){this.$refs.field.removeEventListener("keydown",this.blockArrow)},computed:{showLabel:function(){return this.focus||this.value.toString().length>0}},watch:{isError:function(t,e){if(this.isError&&this.$el.closest(".popup-wrapper")){var o=0,n=this.$el.closest(".popup-wrapper");o+=parseFloat(n.offsetTop),n.scrollTo({top:o,left:0,behavior:"smooth"})}}},methods:{clearName:function(){if("nameCompany"===this.name){var t=this.$refs.field.value.replace(/«/g,"").replace(/»/g,"");this.$refs.field.value=t,this.$emit("input",t)}},blockArrow:function(t){if(t.keyCode>=37&&t.keyCode<=40)return t.preventDefault(),!1},updateValue:function(t){var e=t;this.isMoney&&(e=e.replace(/[-;":'a-zA-Zа-яА-Я\\=`ё/\*++!@#$%\^&_№?><\s]/g,""),+e>this.maxMoney?(e=this.maxMoney,e=Object(r["b"])(e,0,""," ")):""!==e&&(e=Object(r["b"])(e,0,""," ")),this.$refs.field.value=e),this.mask&&"9{1,2}%"==this.mask.mask&&0!==+e&&(e=+e,this.$refs.field.value=e),this.$emit("input",e)},enter:function(t){this.$emit("enter",t)},check:function(){this.$emit("check")},clear:function(){this.$refs.field.focus(),this.$emit("input","")},setFocus:function(t){var e=this;t=t||!1,this.focus=t,t?(this.$emit("focus"),setTimeout((function(){e.showPlaceholder=!0}),50)):(this.$emit("blur"),this.showPlaceholder=!1)},edit:function(){this.$emit("edit")}}},s=a,c=(o("aa13"),o("2877")),u=Object(c["a"])(s,n,i,!1,null,"7b9cbdf6",null);e["a"]=u.exports},b643:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var n={"Content-Type":"application/json;charset=utf-8"}},be72:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},[o("div",{staticClass:"search-inpt-bg",class:{fadeIn:t.searchFocus}}),o("div",{staticClass:"search",class:{focused:t.searchFocus,opened:t.showSearch,filled:t.searchQuery.length>0}},[o("input-styled",{attrs:{"remove-btn":!0,"current-model":t.searchQuery,placeholder:"Поиск скидок","placeholder-input":"Поиск скидок","is-clear-btn":!0},on:{enter:function(e){return t.getSearch(e)},focus:function(e){return t.focusInput()},blur:function(e){return t.blurInput()}},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),t.searchQuery.length>0?o("button",{staticClass:"btn",on:{click:function(e){return t.getSearch(e)}}},[t._v("Искать")]):t._e()],1)])},i=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("7f7f"),o("386d"),o("bd86")),a=o("2f62"),s=o("b10c");function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var l={name:"SearchTop",data:function(){return{focus:!1,searchFocus:!1}},props:{showSearch:{default:function(){return!1}}},components:{InputStyled:s["a"]},computed:u({searchQuery:{get:function(){return this.$store.state.search.query},set:function(t){this.$store.commit("search/updateQuery",t)}}},Object(a["b"])({currentCity:function(t){return t.cities.current}})),methods:{focusInput:function(){this.searchFocus=!0,document.getElementsByTagName("body")[0].classList.add("nonscroll")},blurInput:function(){this.searchFocus=!1,document.getElementsByTagName("body")[0].classList.remove("nonscroll")},getSearch:function(t){this.blurInput(),this.searchFocus=!1,t.target.blur(),this.$store.state.search.query.length>0&&("search"!==this.$route.name&&this.$router.push("/search"),this.$store.dispatch("actions/initialSearchState"),this.$store.dispatch("actions/getCouponList",{currentSection:!1,isSearch:!0}))},resetSearch:function(){this.searchQuery="",this.$refs.searchInput.focus()}}},d=l,m=o("2877"),p=Object(m["a"])(d,n,i,!1,null,"146a0ec6",null);e["a"]=p.exports},c739:function(t,e,o){},cefd:function(t,e,o){},d5fd:function(t,e,o){"use strict";o("a481"),o("7f7f");var n=o("7618"),i=o("bc3a"),r=o.n(i),a=o("4328"),s=o.n(a),c=o("b643"),u=(o("2b27"),o("2b0e")),l={forms:{auth:{fields:{login:{name:"login",value:"",required:!0,error:!1,errorText:"Некорректный номер",disabled:!1},password:{name:"password",value:"",required:!0,error:!1,errorText:"Неверный код",disabled:!1}},step:1,timer:{time:0,timeDefault:180,intervalId:!1,smsBan:!1,timeBan:0}},registration:{fields:{firstName:{name:"firstName",value:"",required:!0,error:!1,errorText:"Обязательное поле",disabled:!1}}}},isBanned:!1,isBannedPartner:!1,isRedirect:!0,isValidPhone:!0,authPhone:""},d={getList:function(t){return function(e){return t.data}},token:function(){return"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}},m={startTimer:function(t,e){if(l.forms.auth.timer.intervalId&&0===l.forms.auth.timer.time&&(clearInterval(l.forms.auth.timer.intervalId),t.commit("clearInterval")),!l.forms.auth.timer.intervalId){var o=l.forms.auth.timer.timeDefault;e&&e.time&&(o=e.time),t.commit("setTimerTime",o);var n=setInterval((function(){l.forms.auth.timer.time>0?t.commit("decrementTimerTime"):(clearInterval(l.forms.auth.timer.intervalId),t.commit("clearInterval"))}),1e3);t.commit("setInterval",n)}},checkLogin:function(t,e){return new Promise((function(o,i){var a={login:t.state.forms.auth.fields.login.value};e.isPartner&&(a.checkPartner=!0),e.isLK&&(a.checkLK=!0),r.a.post("https://api.zemskidki.ru/public/v1/public/users/",{},{withCredentials:!0,params:a,paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})},headers:c["a"]}).then((function(i){if("object"===Object(n["a"])(i.data)&&0===+i.data.error)e.isPartner&&void 0!==i.data.result.ban&&"partner"===i.data.result.ban.banType?(t.commit("setBanPartner",!0),i.data.result.partner&&t.commit("partner/setCurrent",{item:i.data.result.partner},{root:!0}),i.data.result.partner&&!1===i.data.result.partner.success&&t.commit("partner/setLoaded",!0,{root:!0})):void 0!==i.data.result.ban&&"sms"===i.data.result.ban.banType?t.commit("setSmsBan",i.data.result.ban):i.data.result.noValidPhone?t.commit("setIsValidPhone",!1):i.data.result.threshold&&i.data.result.threshold.time>0?t.dispatch("startTimer",{time:i.data.result.threshold.time}):e.resend&&t.dispatch("startTimer",{time:l.forms.auth.timer.timeDefault});else if(i.data.error>0)switch(+i.data.error){case 400:t.commit("setFormAuthError",{name:t.state.forms.auth.fields.login.name,value:!0});break;case 403:t.commit("setBan",!0);break;case 401:t.commit("setAuthPhone"),t.commit("clearForms"),t.commit("popups/close",{name:t.rootState.popups.items.publicAuth.name},{root:!0}),t.commit("popups/open",{name:t.rootState.popups.items.userBanned.name},{root:!0});break}o()})).catch((function(t){i()}))}))},getToken:function(t,e){return new Promise((function(o,i){r.a.post("https://api.zemskidki.ru/public/v1/public/tokens/",{},{headers:c["a"],withCredentials:!0,params:{login:t.state.forms.auth.fields.login.value,password:t.state.forms.auth.fields.password.value},paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(i){if("object"===Object(n["a"])(i.data)&&0===+i.data.error){if(i.data.result.token){t.commit("setFormAuthField",{name:"password",value:""}),localStorage.setItem("token",i.data.result.token),window.app.localStorage.token=i.data.result.token;var r=i.data.result.user;t.commit("users/setUser",{user:r},{root:!0}),r.firstName&&r.secondName&&r.lastName&&r.email&&!e.isOrder&&t.commit("popups/close",{name:t.rootState.popups.items.publicAuth.name},{root:!0}),o()}}else if(i.data.error>0)switch(+i.data.error){case 401:t.commit("setFormAuthError",{name:t.state.forms.auth.fields.password.name,value:!0});break;case 403:t.commit("setBan",!0);break}})).catch((function(t){i(t)}))}))},registration:function(t){r.a.put("https://api.zemskidki.ru/public/v1/user/users/",{},{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0,params:{firstName:t.state.forms.registration.fields.firstName.value},paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error?(app.$router.push("/personal"),t.commit("popups/close",{name:t.rootState.popups.items.publicAuth.name},{root:!0}),t.commit("users/setUser",e.data.result,{root:!0})):401===+e.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){}))},logout:function(t,e){localStorage.setItem("token","false"),window.app.localStorage&&(window.app.localStorage.token=!1),t.commit("users/setUser",{user:{}},{root:!0}),t.rootState.userCoupons&&t.commit("userCoupons/setCouponList",{items:[]},{root:!0}),t.commit("setFormAuthField",{name:"login",value:""}),t.commit("setFormAuthDisabled",{name:"login",value:!1}),t.commit("setStep",{step:1}),t.commit("clearForms"),t.rootState.partner&&(t.commit("partner/setLoaded",!1,{root:!0}),t.commit("partner/setCurrentField",{name:"success",value:!1},{root:!0}),t.commit("partner/setLoaded",!0,{root:!0})),window.scroll(0,0)},clearUserAuthInfo:function(t){localStorage.setItem("token","false"),t.commit("users/setUser",{user:{}},{root:!0}),t.rootState.userCoupons&&t.commit("userCoupons/setCouponList",{items:[]},{root:!0})}},p={setFormAuthField:function(t,e){t.forms.auth.fields.hasOwnProperty(e.name)&&(t.forms.auth.fields[e.name].value=e.value)},setFormAuthError:function(t,e){t.forms.auth.fields.hasOwnProperty(e.name)&&(t.forms.auth.fields[e.name].error=e.value)},setFormAuthDisabled:function(t,e){t.forms.auth.fields.hasOwnProperty(e.name)&&(t.forms.auth.fields[e.name].disabled=e.value)},setFormRegistrationField:function(t,e){t.forms.registration.fields.hasOwnProperty(e.name)&&(t.forms.registration.fields[e.name].value=e.value)},setFormRegistrationError:function(t,e){t.forms.registration.fields.hasOwnProperty(e.name)&&(t.forms.registration.fields[e.name].error=e.value)},setFormRegistrationDisabled:function(t,e){t.forms.registration.fields.hasOwnProperty(e.name)&&(t.forms.registration.fields[e.name].disabled=e.value)},setTimerTime:function(t,e){t.forms.auth.timer.time=e},decrementTimerTime:function(t){t.forms.auth.timer.time--},clearInterval:function(t){t.forms.auth.timer.intervalId=!1},setInterval:function(t,e){t.forms.auth.timer.intervalId=e},setStep:function(t,e){e&&e.step>0&&(t.forms.auth.step=e.step)},setIsValidPhone:function(t,e){u["a"].set(t,"isValidPhone",e)},setBan:function(t,e){t.isBanned=e},setBanPartner:function(t,e){t.isBannedPartner=e},setIsRedirect:function(t,e){t.isRedirect=e},setSmsBan:function(t,e){t.forms.auth.timer.smsBan=!0,t.forms.auth.timer.timeBan=e.bannedTime},setAuthPhone:function(t){t.authPhone=t.forms.auth.fields.login.value.replace(/\+7|-|\(|\)/g,"")},clearForms:function(t){u["a"].set(t,"forms",{auth:{fields:{login:{name:"login",value:"",required:!0,error:!1,errorText:"Некорректный номер",disabled:!1},password:{name:"password",value:"",required:!0,error:!1,errorText:"Неверный код",disabled:!1}},step:1,timer:{time:0,timeDefault:180,intervalId:!1,smsBan:!1,timeBan:0}},registration:{fields:{firstName:{name:"firstName",value:"",required:!0,error:!1,errorText:"Обязательное поле",disabled:!1}}}})}};e["a"]={namespaced:!0,state:l,getters:d,actions:m,mutations:p}},e70d:function(t,e,o){"use strict";var n=o("c739"),i=o.n(n);i.a},e8cf:function(t,e,o){"use strict";o("7514");var n=o("7618"),i=o("bc3a"),r=o.n(i),a=o("4328"),s=o.n(a),c=o("b643"),u=(o("2b27"),o("2b0e")),l={items:[],isLoadNextPage:!0,isLoad:!1,positive:0,negative:0},d={getList:function(t){return function(e){return t.data}}},m={getList:function(t,e){(!l.isLoad&&l.isLoadNextPage||e.reload)&&(t.commit("setLoad",!0),r.a.get("https://api.zemskidki.ru/public/v1/public/opinions/",{headers:c["a"],params:{actionId:e.actionId},paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(o){t.commit("setLoad",!1),e.reload&&t.commit("setData",{items:[]}),"object"===Object(n["a"])(o.data)&&0===+o.data.error&&(t.commit("setData",o.data.result),t.commit("isLoadNextPage",o.data.result.isLoadNextPage))})).catch((function(e){t.commit("setLoad",!1)})))},getListPartner:function(t,e){(!l.isLoad&&l.isLoadNextPage||e.reload)&&(t.commit("setLoad",!0),r.a.get("https://api.zemskidki.ru/public/v1/partner/opinions/",{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")}}).then((function(o){t.commit("setLoad",!1),e&&e.reload&&t.commit("setData",{items:[]}),"object"===Object(n["a"])(o.data)&&0===+o.data.error?(t.commit("setData",o.data.result),t.commit("isLoadNextPage",o.data.result.isLoadNextPage)):401===+o.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(e){t.commit("setLoad",!1)})))},sendAnswer:function(t,e){return new Promise((function(o,i){var a=new FormData;a.append("text",e.text),r.a.post("https://api.zemskidki.ru/public/v1/partner/opinions/"+e.id+"/",a,{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},withCredentials:!0}).then((function(i){o(),"object"===Object(n["a"])(i.data)&&0===+i.data.error?void 0!==i.data.result&&t.commit("setAnswer",{answer:i.data.result.answer,id:e.id}):401===+i.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){i()}))}))},sendForm:function(t,e){var o={text:e.text,actionId:e.actionId,type:e.type};r.a.post("https://api.zemskidki.ru/public/v1/user/opinions/",{},{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"false"!==localStorage.getItem("token")&&null!==localStorage.getItem("token")&&void 0!==localStorage.getItem("token")&&localStorage.getItem("token")},params:o,paramsSerializer:function(t){return s.a.stringify(t,{arrayFormat:"repeat"})}}).then((function(o){if("object"===Object(n["a"])(o.data)&&0===+o.data.error){if(void 0!==o.data.result.item.id){t.commit("users/pushOpinion",{id:o.data.result.item.id,action:e.actionId},{root:!0});var i=o.data.result.item;i.text=e.text,t.commit("pushItem",i),t.commit("actions/incrementCouponDetailCountOpinion","",{root:!0})}}else 401===+o.data.error&&t.dispatch("auth/logout",{},{root:!0})})).catch((function(t){}))}},p={setData:function(t,e){if(null!==e&&null!==e.items){for(var o in t.page<2&&(t.items=[]),e.items)e.items.hasOwnProperty(o)&&function(){var n=e.items[o],i=t.items.find((function(t){return+t.id===+n.id}));i||t.items.push(n)}();t.positive=e.positive,t.negative=e.negative}},clearData:function(t,e){t.items=[],t.positive=0,t.negative=0},pushItem:function(t,e){t.items.push(e)},setStatus:function(t,e){u["a"].set(t,"status",!e.error)},setPage:function(t,e){t.page=e},incrementPage:function(t){t.page++},isLoadNextPage:function(t,e){t.isLoadNextPage=e},setLoad:function(t,e){t.isLoad=e},setButtonState:function(t,e){for(var o in t.items)+e.id===+t.items[o].id&&void 0!==t.items[o].form.btnType&&u["a"].set(t.items[o].form,"btnType",e.state)},toggleForm:function(t,e){for(var o in t.items)+e.id===+t.items[o].id&&u["a"].set(t.items[o].form,"show",!t.items[o].form.show)},setError:function(t,e){for(var o in t.items)+e.id===+t.items[o].id&&u["a"].set(t.items[o].form,"commentError",e.error)},setComment:function(t,e){for(var o in t.items)+e.id===+t.items[o].id&&u["a"].set(t.items[o].form,"comment",e.value)},setAnswer:function(t,e){for(var o in t.items)+e.id===+t.items[o].id&&u["a"].set(t.items[o],"answer",e.answer)}};e["a"]={namespaced:!0,state:l,getters:d,actions:m,mutations:p}},ed85:function(t,e,o){"use strict";o("28a5"),o("7f7f"),o("ac6a"),o("5df3"),o("4f7f");var n=o("7618"),i=o("75fc"),r=(o("7514"),o("bc3a")),a=o.n(r),s=o("b643"),c=o("2b27"),u=o.n(c),l=o("2b0e"),d={items:[],current:{name:"",region:"",xmlId:"",id:"",regionCode:""},currentXmlId:"",currentCityIp:{}},m={getByXmlId:function(t){return function(e){return Object(i["a"])(t.items).find((function(t){return t.xmlId===e}))}}},p={getCities:function(t){a.a.get("https://api.zemskidki.ru/public/v1/public/cities/",{headers:s["a"],withCredentials:!0}).then((function(e){"object"===Object(n["a"])(e.data)&&0===+e.data.error&&(t.commit("setItems",e.data.result),t.commit("setCurrentCity",e.data.result))})).catch((function(t){}))},setCity:function(t,e){void 0!==e.city&&t.commit("setCity",e.city),t.commit("actions/hideMap",{},{root:!0}),void 0!==e.closePopup&&t.commit("popups/close",{name:e.closePopup},{root:!0}),t.commit("actions/setPage",1,{root:!0}),t.commit("actions/isLoadNextPage",!0,{root:!0}),t.commit("actions/setCouponList",{items:[]},{root:!0}),t.commit("actions/setCategoriesList",{items:new Set},{root:!0}),t.dispatch("actions/getCouponList",{currentSection:e.currentSection},{root:!0}),t.dispatch("actions/getCategoriesList",{},{root:!0})},setCityCookies:function(t){var e=u.a.get("currentCity");null!==e&&e.id>0&&t.commit("setCity",e)},getGeodata:function(t,e){void 0!==d.current.coords&&d.current.coords.length>0&&!e.reload||a.a.get("https://geocode-maps.yandex.ru/1.x/?format=json&results=1&geocode="+d.current.name).then((function(e){if(e.data.response.GeoObjectCollection.featureMember){var o=e.data.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ");t.commit("setCurrentCoords",[o[1],o[0]])}})).catch((function(t){}))}},f={setItems:function(t,e){if("object"===Object(n["a"])(e)&&void 0!==e.items){var o=new Set;for(var i in e.items)o.add(e.items[i]);t.items=o}},setCurrentCity:function(t,e){if("object"===Object(n["a"])(e)&&void 0!==e.current){""===t.current.id&&(l["a"].set(t.current,"name",e.current.name),l["a"].set(t.current,"region",e.current.region),l["a"].set(t.current,"xmlId",e.current.xmlId),l["a"].set(t.current,"id",e.current.id),l["a"].set(t.current,"regionCode",e.current.regionCode)),l["a"].set(t,"currentCityIp",e.current),u.a.set("currentCityIp",e.current);var o=u.a.get("currentCity");o||u.a.set("currentCity",e.current)}},setCity:function(t,e){"object"===Object(n["a"])(e)&&void 0!==e.xmlId&&t.current.xmlId!==e.xmlId&&(t.current.name=e.name,t.current.region=e.region,t.current.xmlId=e.xmlId,t.current.id=e.id,t.current.regionCode=e.regionCode,u.a.set("currentCity",e))},setCurrentCoords:function(t,e){t.current.coords=e,u.a.set("currentCity",t.current)}};e["a"]={namespaced:!0,state:d,getters:m,actions:p,mutations:f}},f2c8:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("589d"),i=o.n(n);function r(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;if(e&&document.querySelector(t)||"up"===t){var n;o=o||66;var r=document.querySelector("header").offsetHeight,a=document.querySelector(".warning-top"),s=a?a.offsetHeight:0;if("up"===t)n=0;else{var c=document.querySelector(t).getBoundingClientRect();n=c.top+window.pageYOffset-r-s-o}i()(document.querySelector("body"),"finish"),i()(document.querySelector("body"),"scroll",{duration:400,offset:n})}}}}]);
//# sourceMappingURL=chunk-common.af99188f.js.map