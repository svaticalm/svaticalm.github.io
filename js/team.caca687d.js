(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["team"],{"1d40":function(e,t,s){"use strict";var i=s("5eb1"),r=s.n(i);r.a},3728:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("div",{staticClass:"main-title"},[e._m(0),-1!==e.user.permission.indexOf(7)?s("div",{staticClass:"main-title__right --icon"},[s("a",{staticClass:"link-grey text-size-s link-icon text-bold",staticStyle:{"text-decoration":"none"},attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.openAddPopup(t)}}},[s("span",{staticClass:"i i-plus2",staticStyle:{transform:"scale(0.75)"}}),s("span",{staticClass:"text"},[e._v("ДОБАВИТЬ СОТРУДНИКА")])])]):e._e(),-1===e.user.permission.indexOf(7)?s("div",{staticClass:"main-title__right"},[e._m(1)]):e._e()]),s("section",{staticClass:"container"},[s("div",{staticClass:"container__full"},[s("div",{staticClass:"partner-workers"},[s("div",{staticClass:"item"},[s("div",{staticClass:"item__title"},[e._m(2),e._m(3),e._m(4),e._m(5),s("span",{staticClass:"item item--received active ",class:{up:"up"===e.sort.cashier},on:{click:function(t){return e.setSort("cashier")}}},[s("span",{staticClass:"b"},[e._v("поступило в кассу")])])])]),e._l(e.sorteredTeam,(function(t){return s("div",{staticClass:"item"},[s("a",{staticClass:"item__link",class:{" --blocked":t.isBanned},attrs:{href:"javascript:void(0);"},on:{click:function(s){return e.openEditPopup(t)}}},[s("span",{staticClass:"item item--name"},[e._v(e._s(t.lastName)+" "+e._s(t.name)+" "+e._s(t.secondName)+" "),t.isBanned?s("span",{staticClass:"i i-stop",staticStyle:{transform:"scale(0.75)"}}):e._e()]),s("span",{staticClass:"item item--paid"},[e._v(e._s(t.coupons.extinguished))]),s("span",{staticClass:"item item--sales"},[e._v(e._s(t.coupons.price)+" "),s("span",{staticClass:"rouble"},[e._v(e._s(e.$store.getters["options/setRouble"]))])]),s("span",{staticClass:"item item--disc"},[e._v(e._s(t.coupons.discountSum)+" "),s("span",{staticClass:"rouble"},[e._v(e._s(e.$store.getters["options/setRouble"]))])]),s("span",{staticClass:"item item--received"},[e._v(e._s(t.coupons.cashier)+" "),s("span",{staticClass:"rouble"},[e._v(e._s(e.$store.getters["options/setRouble"]))])])])])})),s("div",{staticClass:"item"},[e.teams.users&&e.teams.users.length>1?s("div",{staticClass:"item__total"},[e._m(6),s("span",{staticClass:"item item--paid"},[s("span",{staticClass:"b"},[e._v(e._s(e.teams.couponsInfoTotal.extinguished)+" ")])]),s("span",{staticClass:"item item--sales"},[s("span",{staticClass:"b"},[e._v(e._s(e.teams.couponsInfoTotal.price)+" "),s("span",{staticClass:"rouble"},[e._v(e._s(e.$store.getters["options/setRouble"]))])])]),s("span",{staticClass:"item item--disc"},[s("span",{staticClass:"b"},[e._v(e._s(e.teams.couponsInfoTotal.discountSum)+" "),s("span",{staticClass:"rouble"},[e._v(e._s(e.$store.getters["options/setRouble"]))])])]),s("span",{staticClass:"item item--received"},[s("span",{staticClass:"b"},[e._v(e._s(e.teams.couponsInfoTotal.cashier)+" "),s("span",{staticClass:"rouble"},[e._v(e._s(e.$store.getters["options/setRouble"]))])])])]):e._e()])],2)])]),s("popup",{attrs:{"is-set-styled":!0,show:e.popups.userProviderEdit.show,name:e.popups.userProviderEdit.name}},[s("team-edit",{attrs:{user:e.userEdit}})],1),s("popup",{attrs:{"is-set-styled":!0,show:e.popups.userProviderAdd.show,name:e.popups.userProviderAdd.name}},[s("team-add")],1)],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-title__wrap main-title--nowrap"},[s("div",{staticClass:"h1"},[e._v("Сотрудники")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"text-color-grey"},[s("span",{staticClass:"i i-lock3 i--dark-trans mr4"}),e._v("У вас нет доступа к созданию и редактированию сотрудников")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"item item--name"},[s("span",{staticClass:"b"},[e._v("ФИО сотрудника")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"item item--paid"},[s("span",{staticClass:"b"},[e._v("погашено купонов")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"item item--sales"},[s("span",{staticClass:"b"},[e._v("Объём продаж")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"item item--disc"},[s("span",{staticClass:"b"},[e._v("предоставлено скидок")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"item item--name"},[s("span",{staticClass:"b"},[e._v("ВСЕГО")])])}],n=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("6b54"),s("28a5"),s("55dd"),s("75fc")),a=s("bd86"),o=s("2f62"),c=s("516f"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"popup__header popup__header--dotted"},[s("div",{staticClass:"title"},[e._v(e._s(e.user.lastName)+" "+e._s(e.user.name)+" "+e._s(e.user.secondName))]),s("div",{staticClass:"subtitle"},[e._v(e._s(e.user.phone)+", "+e._s(e.user.email))])]),s("div",{staticClass:"popup__content"},[s("div",{staticClass:"row-b mb16"},[e._m(0),s("div",{staticClass:"row-b__col elem-pos-fix"},[e.user.id===e.currentUser.id||e.user.isNotBanned||-1===e.currentUser.permission.indexOf(7)?e._e():s("a",{staticClass:"link-grey",attrs:{href:"javascript:void(0);"}},[e.user.isBanned?s("span",{on:{click:e.unban}},[e._v("Разблокировать сотрудника")]):s("span",{on:{click:e.ban}},[e._v("Заблокировать сотрудника")])]),e.user.id===e.currentUser.id&&-1!==e.currentUser.permission.indexOf(7)?s("span",{staticClass:"text-color-grey"},[e._v("Вы не можете у себя менять допуски и разрешения")]):e._e(),-1===e.currentUser.permission.indexOf(7)?s("span",{staticClass:"text-color-grey"},[s("span",{staticClass:"i i-lock3 i--dark-trans mr4"}),e._v("У вас нет доступа к редактированию сотрудников")]):e._e()])]),s("div",{staticClass:"mt16"},[s("div",{staticClass:"mt16"},[s("input",{attrs:{checked:"",disabled:!0,type:"checkbox",id:"team-edit-0"}}),s("label",{attrs:{for:"team-edit-0"}},[e._v("Проверка и погашение купонов")])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[5],expression:"permission[5]"}],attrs:{disabled:e.user.id===e.currentUser.id||-1===e.currentUser.permission.indexOf(7),type:"checkbox",id:"team-edit-5"},domProps:{checked:Array.isArray(e.permission[5])?e._i(e.permission[5],null)>-1:e.permission[5]},on:{change:function(t){var s=e.permission[5],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,5,s.concat([n])):a>-1&&e.$set(e.permission,5,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,5,r)}}}),s("label",{attrs:{for:"team-edit-5"}},[e._v(e._s(e.permissionText[5]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[6],expression:"permission[6]"}],attrs:{disabled:e.user.id===e.currentUser.id||-1===e.currentUser.permission.indexOf(7),type:"checkbox",id:"team-edit-6"},domProps:{checked:Array.isArray(e.permission[6])?e._i(e.permission[6],null)>-1:e.permission[6]},on:{change:function(t){var s=e.permission[6],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,6,s.concat([n])):a>-1&&e.$set(e.permission,6,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,6,r)}}}),s("label",{attrs:{for:"team-edit-6"}},[e._v(e._s(e.permissionText[6]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[16],expression:"permission[16]"}],attrs:{disabled:e.user.id===e.currentUser.id||-1===e.currentUser.permission.indexOf(7),type:"checkbox",id:"team-edit-16"},domProps:{checked:Array.isArray(e.permission[16])?e._i(e.permission[16],null)>-1:e.permission[16]},on:{change:function(t){var s=e.permission[16],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,16,s.concat([n])):a>-1&&e.$set(e.permission,16,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,16,r)}}}),s("label",{attrs:{for:"team-edit-16"}},[e._v(e._s(e.permissionText[16]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[7],expression:"permission[7]"}],attrs:{disabled:e.user.id===e.currentUser.id||-1===e.currentUser.permission.indexOf(7),type:"checkbox",id:"team-edit-7"},domProps:{checked:Array.isArray(e.permission[7])?e._i(e.permission[7],null)>-1:e.permission[7]},on:{change:function(t){var s=e.permission[7],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,7,s.concat([n])):a>-1&&e.$set(e.permission,7,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,7,r)}}}),s("label",{attrs:{for:"team-edit-7"}},[e._v(e._s(e.permissionText[7]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[9],expression:"permission[9]"}],attrs:{disabled:e.user.id===e.currentUser.id||-1===e.currentUser.permission.indexOf(7),type:"checkbox",id:"team-edit-9"},domProps:{checked:Array.isArray(e.permission[9])?e._i(e.permission[9],null)>-1:e.permission[9]},on:{change:function(t){var s=e.permission[9],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,9,s.concat([n])):a>-1&&e.$set(e.permission,9,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,9,r)}}}),s("label",{attrs:{for:"team-edit-9"}},[e._v(e._s(e.permissionText[9]))])])])]),e.user.id!==e.currentUser.id&&-1!==e.currentUser.permission.indexOf(7)?s("div",{staticClass:"popup__footer"},[s("div",{staticClass:"row-b"},[s("submit-btn",{staticClass:"btn btn--green",attrs:{tag:"button",type:e.stateBtn},nativeOn:{click:function(t){return e.save(t)}}},[e._v("\n                Сохранить изменения\n            ")])],1)]):e._e()])},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row-b__col elem-pos-fit"},[s("div",{staticClass:"h2"},[e._v("Допуски и разрешения")])])}],u=(s("7514"),s("b10c")),m=s("557e");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={name:"TeamEdit",components:{InputStyled:u["a"],SubmitBtn:m["a"]},props:{user:{default:function(){return{}}}},data:function(){return{permission:{5:!1,6:!1,16:!1,7:!1,8:!1,9:!1},permissionText:{5:"Редактирование информации «О поставщике»",6:"Создание и редактирование акций",16:"Написание ответов на отзывы от лица компании",7:"Создание и редактирование сотрудников",8:"Просмотр статистики продаж",9:"Просмотр бухгалтерского отчета и статистики продаж"},stateBtn:"normal",isSend:!1}},computed:f({},Object(o["b"])({popups:function(e){return e.popups.items},currentUser:function(e){return e.users.user}})),mounted:function(){var e=this,t=function(t){4!==+t&&(e.user.permission.find((function(e){return+e===+t}))?e.permission[t]=!0:e.permission[t]=!1)};for(var s in this.permission)t(s)},methods:{save:function(){var e=this;this.stateBtn="load",this.$store.dispatch("teams/save",{permission:this.permission,id:this.user.id}).then((function(){e.stateBtn="ok",setTimeout((function(){e.$store.commit("popups/close",{name:e.popups.userProviderEdit.name}),e.stateBtn="normal"}),300)}),(function(){e.stateBtn="normal"}))},ban:function(){var e=this;this.isSend||(this.isSend=!0,this.$store.dispatch("teams/ban",{id:this.user.id}).then((function(){e.isSend=!1})))},unban:function(){var e=this;this.isSend||(this.isSend=!0,this.$store.dispatch("teams/unban",{id:this.user.id}).then((function(){e.isSend=!1})))}}},h=v,_=s("2877"),b=Object(_["a"])(h,l,p,!1,null,null,null),y=b.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),s("div",{staticClass:"popup__content"},[s("div",{staticClass:"row-b"},[s("input-multi",{key:"teamsFio",attrs:{id:"teams-fio","is-error":e.fio.error,fields:e.fio.fields,placeholder:"ФИО сотрудника"},on:{chunk:e.setFio,focus:function(t){return e.removeFieldError("fio")}},model:{value:e.fio.value,callback:function(t){e.$set(e.fio,"value",t)},expression:"fio.value"}})],1),s("div",{staticClass:"row-b mt40"},[s("div",{staticClass:"row-b__col elem-pos-fix mr24",staticStyle:{width:"240px","min-width":"240px"}},[s("input-styled",{attrs:{mask:e.masks.phone,"is-block-arrow-phone":!0,"is-error":e.phone.error,placeholder:"Номер телефона","placeholder-input":"+7(___)___-__-__"},on:{focus:function(t){return e.removeFieldError("phone")}},model:{value:e.phone.value,callback:function(t){e.$set(e.phone,"value",t)},expression:"phone.value"}})],1),s("div",{staticClass:"row-b__col elem-pos-fit",attrs:{id:"company-ceo"}},[s("input-styled",{attrs:{"is-error":e.email.error,placeholder:"E-mail","placeholder-input":"info@domain.com"},on:{focus:function(t){return e.removeFieldError("email")}},model:{value:e.email.value,callback:function(t){e.$set(e.email,"value",t)},expression:"email.value"}})],1)]),e._m(1),s("div",{staticClass:"mt16"},[s("div",{staticClass:"mt16"},[s("input",{attrs:{checked:"",disabled:!0,type:"checkbox",id:"team-edit-0"}}),s("label",{attrs:{for:"team-edit-0"}},[e._v("Проверка и погашение купонов")])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[5],expression:"permission[5]"}],attrs:{type:"checkbox",id:"team-edit-5"},domProps:{checked:Array.isArray(e.permission[5])?e._i(e.permission[5],null)>-1:e.permission[5]},on:{change:function(t){var s=e.permission[5],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,5,s.concat([n])):a>-1&&e.$set(e.permission,5,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,5,r)}}}),s("label",{attrs:{for:"team-edit-5"}},[e._v(e._s(e.permissionText[5]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[6],expression:"permission[6]"}],attrs:{type:"checkbox",id:"team-edit-6"},domProps:{checked:Array.isArray(e.permission[6])?e._i(e.permission[6],null)>-1:e.permission[6]},on:{change:function(t){var s=e.permission[6],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,6,s.concat([n])):a>-1&&e.$set(e.permission,6,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,6,r)}}}),s("label",{attrs:{for:"team-edit-6"}},[e._v(e._s(e.permissionText[6]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[16],expression:"permission[16]"}],attrs:{type:"checkbox",id:"team-edit-16"},domProps:{checked:Array.isArray(e.permission[16])?e._i(e.permission[16],null)>-1:e.permission[16]},on:{change:function(t){var s=e.permission[16],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,16,s.concat([n])):a>-1&&e.$set(e.permission,16,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,16,r)}}}),s("label",{attrs:{for:"team-edit-16"}},[e._v(e._s(e.permissionText[16]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[7],expression:"permission[7]"}],attrs:{type:"checkbox",id:"team-edit-7"},domProps:{checked:Array.isArray(e.permission[7])?e._i(e.permission[7],null)>-1:e.permission[7]},on:{change:function(t){var s=e.permission[7],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,7,s.concat([n])):a>-1&&e.$set(e.permission,7,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,7,r)}}}),s("label",{attrs:{for:"team-edit-7"}},[e._v(e._s(e.permissionText[7]))])]),s("div",{staticClass:"mt16"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.permission[9],expression:"permission[9]"}],attrs:{type:"checkbox",id:"team-edit-9"},domProps:{checked:Array.isArray(e.permission[9])?e._i(e.permission[9],null)>-1:e.permission[9]},on:{change:function(t){var s=e.permission[9],i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=null,a=e._i(s,n);i.checked?a<0&&e.$set(e.permission,9,s.concat([n])):a>-1&&e.$set(e.permission,9,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.permission,9,r)}}}),s("label",{attrs:{for:"team-edit-9"}},[e._v(e._s(e.permissionText[9]))])])])]),s("div",{staticClass:"popup__footer"},[s("div",{staticClass:"row-b"},[s("div",{staticClass:"row-b__col elem-pos-fix mr24"},[s("submit-btn",{staticClass:"btn btn--green",attrs:{tag:"button",type:e.stateBtn},nativeOn:{click:function(t){return e.save(t)}}},[e._v("\n                    Добавить сотрудника\n                ")])],1),e._m(2)])])])},k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"popup__header popup__header--dotted"},[s("div",{staticClass:"title"},[e._v("Добавление нового сотрудника")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row-b mt32"},[s("div",{staticClass:"row-b__col elem-pos-fit"},[s("div",{staticClass:"h2"},[e._v("Допуски и разрешения")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row-b__col elem-pos-fit"},[s("div",{staticClass:"dif"},[s("span",{staticClass:"i i-warning i--red mr8 mt-2"}),s("span",{staticClass:"t text-color-red text-size-s"},[e._v("Не забудьте обучить нового сотрудника правилам погашения купонов"),s("br"),e._v(" и правилам работы с покупателями!")])])])}],x=(s("a481"),s("f7ac"));function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var O={name:"TeamEdit",components:{InputStyled:u["a"],InputMulti:x["a"],SubmitBtn:m["a"]},data:function(){return{permission:{5:!1,6:!1,16:!1,7:!1,8:!1,9:!1},permissionText:{5:"Редактирование информации «О поставщике»",6:"Создание и редактирование акций",16:"Написание ответов на отзывы от лица компании",7:"Создание и редактирование сотрудников",8:"Просмотр статистики продаж",9:"Просмотр бухгалтерского отчета и статистики продаж"},stateBtn:"normal",isSend:!1,fio:{disabled:!1,required:!0,value:"",error:!1,errorMessage:"",type:"multi",fields:{lastName:{name:"lastName",value:"",delimiter:" ",placeholder:"Фамилия"},name:{name:"name",value:"",delimiter:" ",placeholder:"Имя"},secondName:{name:"secondName",value:"",delimiter:"",placeholder:"Отчество"}}},phone:{disabled:!1,required:!0,value:"",error:!1,type:"phone"},email:{disabled:!1,required:!0,value:"",error:!1,type:"email"}}},computed:$({},Object(o["b"])({popups:function(e){return e.popups.items},currentUser:function(e){return e.users.user},masks:function(e){return e.masks.items}})),mounted:function(){},methods:{save:function(){var e=this;this.valid()&&(this.stateBtn="load",this.$store.dispatch("teams/add",{permission:this.permission,secondName:this.fio.fields.secondName.value,name:this.fio.fields.name.value,lastName:this.fio.fields.lastName.value,phone:this.phone.value,email:this.email.value}).then((function(){e.stateBtn="ok",setTimeout((function(){e.$store.commit("popups/close",{name:e.popups.userProviderAdd.name}),e.stateBtn="normal"}),300)}),(function(){e.stateBtn="normal"})))},valid:function(){var e=!0;return this.checkField(this.phone)||(e=!1),this.checkField(this.email)||(e=!1),this.checkField(this.fio)||(e=!1),e},checkField:function(e){var t=this,s=!0;switch(this.$set(e,"error",!1),e.type){case"phone":var i=e.value.replace(/[^\+0-9]/g,"");i.length<12?(setTimeout((function(){t.$set(e,"error",!0)}),150),s=!1):"9"!=i[2]?(s=!1,setTimeout((function(){t.$set(e,"error",!0)}),150)):this.$set(e,"error",!1);break;case"email":var r=/^[\w\.\d-_]+@[\w\.\d-_]+\.\w{2,99}$/i;r.test(e.value)?this.$set(e,"error",!1):(setTimeout((function(){t.$set(e,"error",!0)}),150),s=!1);break;case"multi":for(var n in e.fields){var a=e.fields[n];0===a.value.length&&(setTimeout((function(){t.$set(e,"error",!0)}),150),s=!1)}break}return s},setFio:function(e){void 0!==e.value&&void 0!==e.name&&(this.fio.fields[e.name].value=e.value)},removeFieldError:function(e){this[e].error=!1}}},w=O,j=(s("1d40"),Object(_["a"])(w,C,k,!1,null,"0fe6fb84",null)),E=j.exports;function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function A(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var S={metaInfo:function(){return{title:"Сотрудники",titleTemplate:this.$store.state.options.titleTemplate}},name:"Team",components:{Popup:c["a"],TeamEdit:y,TeamAdd:E},created:function(){this.$store.dispatch("teams/getItems")},mounted:function(){},data:function(){return{userEdit:{},sort:{cashier:"down"}}},computed:A({},Object(o["b"])({teams:function(e){return e.teams.items},user:function(e){return e.users.user},provider:function(e){return e.partner.current},popups:function(e){return e.popups.items}}),{sorteredTeam:function(){if(this.teams&&this.teams.users){var e=Object(n["a"])(this.teams.users);return"down"===this.sort.cashier?e.sort((function(e,t){return+e.coupons.cashier.toString().split(" ").join("")>+t.coupons.cashier.toString().split(" ").join("")?-1:+e.coupons.cashier.toString().split(" ").join("")<+t.coupons.cashier.toString().split(" ").join("")?1:0})):e.sort((function(e,t){return+e.coupons.cashier.toString().split(" ").join("")<+t.coupons.cashier.toString().split(" ").join("")?-1:+e.coupons.cashier.toString().split(" ").join("")>+t.coupons.cashier.toString().split(" ").join("")?1:0}))}return[]}}),methods:{openEditPopup:function(e){this.userEdit=e,this.$store.dispatch("popups/open",{name:this.popups.userProviderEdit.name})},openAddPopup:function(){this.$store.dispatch("popups/open",{name:this.popups.userProviderAdd.name})},setSort:function(e){this.sort[e]="up"===this.sort[e]?"down":"up"}}},T=S,B=Object(_["a"])(T,i,r,!1,null,null,null);t["default"]=B.exports},"5eb1":function(e,t,s){},b742:function(e,t,s){"use strict";var i=s("d05d"),r=s.n(i);r.a},d05d:function(e,t,s){},f7ac:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"inp-s-wrap full",class:{"--icon":e.isEdit||e.isValidate||e.isClearBtn,active:e.showLabel,"inp-disabled":e.disabled}},[s("span",{staticClass:"inp-s-label",class:{error:e.isError}},[e._v(e._s(e.placeholder))]),s("input",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],ref:"field",staticClass:"inp-s",class:{error:e.isError},attrs:{type:"text",disabled:e.disabled,name:e.nameInput,autocomplete:e.fieldAutocomplete},domProps:{value:e.value},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deleteInput(t)}],focus:function(t){return e.setFocus(!0,t)},blur:function(t){return e.setFocus(!1,t)},input:function(t){return e.updateValue(t.target)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showLabel,expression:"showLabel"}],staticClass:"inp-s-placeholder",class:{error:e.isError},style:e.stylePlaceholderComplex},[e._v(e._s(e.placeholderComplex))]),e.isError?s("span",{staticClass:"inp-s-error"},[e._v(e._s(e.errorText))]):e._e(),e.isClearBtn?s("span",{staticClass:"field-clear__btn",on:{click:e.clear}},[s("span",{staticClass:"i i-close2"})]):e._e(),s("span",{ref:"fieldBuffer",staticClass:"inp-buffer",domProps:{innerHTML:e._s(e.valueBuffer)}}),s("span",{staticClass:"inp-s-icon"},[e.isEdit?s("span",{staticClass:"i i-pencil2 --edit",on:{click:e.edit}}):e._e(),e.isValidate?s("span",{staticClass:"i i-ok2",on:{click:e.check}}):e._e()])])},r=[],n=(s("3b2b"),s("a481"),s("7f7f"),s("28a5"),s("6b54"),{name:"InputMulti",props:{placeholder:{default:""},placeholderInput:{default:""},inputId:{default:""},value:{default:""},disabled:{default:!1},isError:{default:!1},isEdit:{default:!1},isValidate:{default:!1},clearSpecial:{default:!0},name:{default:"name"},errorText:{default:""},mask:{default:""},fieldAutocomplete:{default:"nope"},isClearBtn:{default:!1},fields:{default:function(){return{text:{name:"text",value:"",delimiter:"",placeholder:"text"}}}}},data:function(){return{type:"text",focus:!1,stylePlaceholderComplex:{left:0},nameInput:"",valueBuffer:"",showPlaceholder:!1}},computed:{showLabel:function(){var e="";for(var t in this.fields)e+=this.fields[t].value;return this.focus||e.toString().length>0},placeholderComplex:function(){var e="";for(var t in this.fields)if(0===this.fields[t].value.length){var s=this.fields[t].placeholder;","===this.value.trim().substr(-1,1)&&","===this.fields[t].placeholder.substr(0,1)&&(s=s.split(",").join("")),e+=s,e+=this.fields[t].delimiter}return e.trim()}},mounted:function(){this.valueBuffer=this.value,this.$nextTick((function(){if(this.$refs["fieldBuffer"]){var e=this.$refs["fieldBuffer"].offsetWidth;this.value>0&&(e=+e+7),this.stylePlaceholderComplex={left:e+"px"}}})),"name"!==this.name?this.nameInput=this.name:this.nameInput=Math.random().toString(36).substr(2,5)},methods:{deleteInput:function(e){0===e.target.selectionStart&&this.prev(e.target)},updateValue:function(e){var t=e.value.replace(/\s+/g," ").replace(/^\s+/,"");if(this.clearSpecial){var s=[];for(var i in this.fields)this.fields[i].postfix&&s.push(this.fields[i].postfix);var r=new RegExp("[^a-zа-яё0-9\\s-"+s.join("\\")+"]","i");t=t.replace(r,"")}this.valueBuffer=t;var n=0;for(var a in this.fields)n++;var o,c=t.split(" "),l=[];for(var p in c)p<n-1&&l.push(c[p]);c.splice(0,n-1),c.length>0&&l.push(c.join(" "));var u=0;for(var m in this.fields)l[u]?this.$emit("chunk",{value:l[u].trim().split(this.fields[m].postfix).join(""),name:this.fields[m].name}):this.$emit("chunk",{value:"",name:this.fields[m].name}),u++,u===l.length&&(o=this.fields[m]);t.substr(-1,1)===o.postfix&&" "!==this.value.substr(-1,1)&&(t+=" "),o&&o.postfix&&" "===t.substr(-1,1)&&t.trim().substr(-1,1)!==o.postfix&&this.value.substr(-1,1)!==o.postfix&&0===o.value.trim().length&&(t=t.trim()+o.postfix+" ",this.valueBuffer=t),this.$nextTick((function(){var e=this.$refs["fieldBuffer"].offsetWidth;t.length>0&&","!==this.placeholderComplex.substr(0,1)&&(e=+e+7),this.stylePlaceholderComplex={left:e+"px"}})),this.$emit("input",t)},enter:function(){this.$emit("enter")},check:function(){this.$emit("check")},clear:function(){this.$refs.field.focus(),this.$emit("input","")},next:function(e){e.nextElementSibling&&e.nextElementSibling.focus()},prev:function(e){e.previousElementSibling&&e.previousElementSibling.focus()},setFocus:function(e,t){e=e||!1,this.focus=e,e?(this.$emit("focus"),t.target.previousElementSibling.value&&0===t.target.previousElementSibling.value.length&&t.target.previousElementSibling.focus()):this.$emit("blur")},edit:function(){this.$emit("edit")}}}),a=n,o=(s("b742"),s("2877")),c=Object(o["a"])(a,i,r,!1,null,"3a1b9fbe",null);t["a"]=c.exports}}]);
//# sourceMappingURL=team.caca687d.js.map