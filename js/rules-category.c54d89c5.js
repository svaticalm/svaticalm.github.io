(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["rules-category"],{"7b6c":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.topSections[0]?i("div",[i("div",{staticClass:"rules__header rules__header-staff rules__header-section"},[i("div",{staticClass:"text-size-ml text-bold rules__header-wrapper"},[t.getCurrentTopSect?i("div",{staticClass:"rules__header-left"},[i("span",[t._v(t._s(t.getCurrentTopSect.name))]),i("span",{staticClass:"i-wrapper",on:{click:function(e){return t.openSectionAdd(t.getCurrentTopSect)}}},[i("span",{staticClass:"i i-pencil2"}),i("span",{staticClass:"i i-pencil2-active"})])]):t._e(),i("div",{staticClass:"rules__header-right"},[i("a",{staticClass:"link-icon",attrs:{href:"javascript:void(0);"},on:{click:t.openStaffGroup}},[i("span",{staticClass:"i i-staff"}),i("span",{staticClass:"text"},[t._v("создать группу")])]),i("div",{staticClass:"rules__btn",on:{click:function(e){return t.openAddWorker([])}}},[t._m(0)])])])]),t.getCurrentTopSect?i("div",{staticClass:"content"},[i("div",{staticClass:"container  staff-container"},[0===t.usersGrouped.length?i("div",{staticClass:"nothing-found nothing-found__settings"},[i("svg",{staticClass:"big-icon"},[i("use",{attrs:{"xlink:href":s("f0cd")+"#emoji-search-2"}})]),i("div",{staticClass:"text-size-l text-bold mt16"},[t._v("\n                Здесь пока ничего нет...\n                ")]),i("div",{staticClass:"text-size-m mt4"},[t._v("Срочно сделайте что-нибудь, чтобы здесь что-нибудь было!")])]):i("div",{staticClass:"staff-list"},t._l(t.usersGrouped,(function(e,s){return i("div",{key:"group"+e.id,staticClass:"staff-item"},[i("div",{staticClass:"name"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),0!==e.users.length?i("div",{staticClass:"workers-list admin-access"},t._l(e.users,(function(e,n){return i("div",{key:e.id,staticClass:"worker"},[e.banned?i("div",{staticClass:"i i-stop i--red"}):i("tooltip",{attrs:{direction:"bottom-left-direction","add-class-wrap":"accesses","add-style":{width:"230px"}}},[i("span",{attrs:{slot:"tooltipBtn"},slot:"tooltipBtn"},[i("div",{staticClass:"num"},[t._v("\n                                        "+t._s(Object.keys(e.rights).length)+"\n                                    ")])]),Object.keys(e.rights).length>0?i("div",{attrs:{slot:"tooltipContent"},slot:"tooltipContent"},[t._l(t.topSections,(function(s){return[e.rights[s.id]?i("div",{key:e.id+"_"+s.id,staticClass:"flex-row"},[i("div",{staticClass:"text-bold text-size-s"},[t._v("\n                                                "+t._s(s.name)+"\n                                            ")]),i("div",{staticClass:"access",class:{editor:"W"==e.rights[s.id],reader:"R"==e.rights[s.id]}},[t._v("\n                                                "+t._s("W"==e.rights[s.id]?"редактор":"читатель")+"\n                                            ")])]):t._e()]}))],2):t._e()]),i("div",{staticClass:"worker-name"},[i("span",{staticClass:"text-size-m"},[t._v(t._s(e.name))]),i("span",{staticClass:"text-color-grey text-size-xs"},[t._v(t._s(e.post))])]),i("input-select-new",{staticClass:"borderless",attrs:{tag:"div",value:t.getCurrentUserRights(e),modelId:t.getCurrentUserRights(e),options:t.options,placeholder:"Категория","list-style":{"max-height":"287px"}},on:{change:function(e){return t.changeAccess(e,s,n)}}}),i("div",{staticClass:"worker-email"},[t._v("\n                                "+t._s(e.email)+"\n                            ")]),i("div",{staticClass:"kick-sms"},[e.mark>0&&!e.banned?i("tooltip",{attrs:{direction:"top-center-direction",isBtnClose:!1,"add-style":{width:"184px"}}},[i("span",{attrs:{slot:"tooltipBtn"},slot:"tooltipBtn"},[i("div",{staticClass:"notify-count",class:{active:t.kickActive}})]),i("div",{attrs:{slot:"tooltipContent"},slot:"tooltipContent"},[i("div",{staticClass:"text-size-s mb8"},[t._v("\n                                            Непрочитаных правил: "),i("span",{staticClass:"text-bold"},[t._v(t._s(e.mark))])]),i("submit-btn",{attrs:{type:e.kickUnReadBtnType?e.kickUnReadBtnType:"normal"},nativeOn:{click:function(s){return t.kickUnRead(e.id)}}},["load"!=e.kickUnReadBtnType?i("span",{staticClass:"i i-kick mr8"}):t._e(),t._v("Подтвердить\n                                        ")])],1)]):t._e()],1),i("div",{staticClass:"worker-phone"},[t._v("\n                                "+t._s(e.phone)+"\n                            ")])],1)})),0):t._e()])})),0)])]):t._e(),i("popup",{attrs:{"is-set-styled":!1,show:t.popups.staffGroup.show,name:t.popups.staffGroup.name,width:400,"add-class":"add-cat"}},[i("staff-group")],1),i("popup",{attrs:{"is-set-styled":!1,show:t.popups.removeStaffGroupError.show,name:t.popups.removeStaffGroupError.name,width:400}},[i("remove-staff-group-error")],1),i("popup",{attrs:{"is-set-styled":!1,show:t.popups.addWorker.show,name:t.popups.addWorker.name,width:488,"add-class":"add-worker"}},[i("add-worker")],1)],1):t._e()},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"elem"},[s("span",{staticClass:"i i-staff4"}),t._v("\n                        Добавить сотрудника\n                    ")])}],r=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("ade3")),a=s("2f62"),o=s("516f"),c=s("fe6b"),p=s("e57d"),d=s("fc31"),l=s("1f24"),u=s("33e2"),f=s("d07a"),h=s("d62d"),m=s("557e"),v=s("8fdf");function g(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function k(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?g(Object(s),!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _={metaInfo:function(){return{title:"Раздел",titleTemplate:this.$store.state.options.titleTemplate}},name:"SectionDetail",components:{Popup:o["a"],StaffGroup:c["a"],RemoveStaffGroupError:p["a"],Tooltip:l["a"],draggable:u["a"],AddWorker:d["a"],InputSelect:f["a"],InputSelectNew:h["a"],SubmitBtn:m["a"],Tumbler:v["a"]},data:function(){return{options:[{name:"<span class=text-color-orange2>Читатель</span>",id:1},{name:"<span class=text-color-green>Редактор</span>",id:2},{name:"<span>Нет доступа</span>",id:0}],drag:!1,kickUnReadAllBtnType:"normal",kickActive:!1,form:{selectAccess:{id:2,error:!1}}}},computed:k(k({},Object(a["b"])({popups:function(t){return t.popups.items},topSections:function(t){return t.rules.topSections},usersGrouped:function(t){return t.rulesStaff.usersByDepartmentList},tumblers:function(t){return t.rules.tumblers}})),{},{getCurrentTopSect:function(){if(this.topSections.length>0&&this.$route.params.id)return this.$store.getters["rules/getCurrentTopSect"](this.$route.params.id)}}),methods:{getCurrentUserRights:function(t){return t.rights[this.getCurrentTopSect.id]?"R"==t.rights[this.getCurrentTopSect.id]?1:"W"==t.rights[this.getCurrentTopSect.id]?2:void 0:0},changeAccess:function(t,e,s){this.$store.dispatch("rulesStaff/setUserSectRight",{val:t,index:e,indexUser:s,curSect:this.getCurrentTopSect.id})},setValue:function(t,e){this.$store.commit("rulesStaff/setUsersByDepartmentListByIndex",{items:t,index:e})},up:function(t){this.$store.dispatch("rulesStaff/setMoveGroup",{index:t,direction:"up"})},down:function(t){this.$store.dispatch("rulesStaff/setMoveGroup",{index:t,direction:"down"})},openStaffGroup:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.commit("rulesStaff/setEditGroup",t),this.$store.dispatch("popups/open",{name:this.popups.staffGroup.name})},openAddWorker:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.commit("rulesStaff/setEditUser",t),this.$store.dispatch("popups/open",{name:this.popups.addWorker.name})},dragSave:function(t){this.drag&&(this.$store.dispatch("rulesStaff/setUserSort",{index:t}),this.drag=!1)},dragStart:function(t){this.curDrugGroupIndex=t},dragStatus:function(t){this.drag=!0},openSectionAdd:function(t){this.$store.commit("rules/setEditSection",t),this.$store.dispatch("popups/open",{name:this.popups.sectionAdd.name})},kickUnRead:function(t){var e=this;this.$store.commit("rulesStaff/kickUnReadBtnType",{id:t,type:"load"}),this.$store.dispatch("rulesStaff/kickUnRead",{id:t}).then((function(){e.$store.commit("rulesStaff/kickUnReadBtnType",{id:t,type:"normal"})}))},kickUnReadAll:function(){var t=this;this.kickUnReadAllBtnType="load",this.$store.dispatch("rulesStaff/kickUnReadAll").then((function(){t.kickUnReadAllBtnType="normal"}))}},mounted:function(){this.$store.dispatch("rulesStaff/getUsersByDepartment")}},C=_,S=s("2877"),b=Object(S["a"])(C,i,n,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=rules-category.c54d89c5.js.map